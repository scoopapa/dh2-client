{
  "version": 3,
  "sources": ["../../../../data/mods/gen8haxmeters/scripts.ts"],
  "sourcesContent": ["import {Dex} from '../../../sim/dex';\nexport const Scripts: {[k: string]: ModdedBattleScriptsData} = {\n\tgen: 8,\n\t\n\tside: {\n\t\taddMiss(amount) {\n\t\t\tif (amount === 0) return;\n\t\t\tthis.miss += amount;\n\t\t\tthis.battle.add('-message', `(${this.name}'s Miss Meter: +${amount.toFixed(2)} -> ${this.miss.toFixed(2)})`);\n\t\t},\n\t\tsubtractMiss(amount) {\n\t\t\tthis.miss -= amount;\n\t\t\tthis.battle.add('-message', `(${this.name}'s Miss Meter: -${amount.toFixed(2)} -> ${this.miss.toFixed(2)})`);\n\t\t},\n\t\taddEffect(amount) {\n\t\t\tif (amount === 0) return;\n\t\t\tthis.effect += amount;\n\t\t\tthis.battle.add('-message', `(${this.name}'s Effect Meter: +${amount} -> ${this.effect})`);\n\t\t},\n\t\tsubtractEffect(amount) {\n\t\t\tthis.effect -= amount;\n\t\t\tthis.battle.add('-message', `(${this.name}'s Effect Meter: -${amount} -> ${this.effect})`);\n\t\t},\n\t\taddCrit(amount) {\n\t\t\tif (amount === 0) return;\n\t\t\tthis.crit += amount;\n\t\t\tthis.battle.add('-message', `(${this.name}'s Crit Meter: +${amount.toFixed(2)} -> ${this.crit.toFixed(2)})`);\n\t\t},\n\t\tsubtractCrit(amount) {\n\t\t\tthis.crit -= amount;\n\t\t\tthis.battle.add('-message', `(${this.name}'s Crit Meter: -${amount.toFixed(2)} -> ${this.crit.toFixed(2)})`);\n\t\t},\n\t\taddStatus(amount) {\n\t\t\tif (amount === 0) return;\n\t\t\tthis.status += amount;\n\t\t\tthis.battle.add('-message', `(${this.name}'s Status Meter: +${amount} -> ${this.status})`);\n\t\t},\n\t\tsubtractStatus(amount) {\n\t\t\tthis.status -= amount;\n\t\t\tthis.battle.add('-message', `(${this.name}'s Status Meter: -${amount} -> ${this.status})`);\n\t\t},\n\t},\n\tactions: {\n\t\thitStepAccuracy(targets: Pokemon[], pokemon: Pokemon, move: ActiveMove) {\n\t\t\tconst hitResults = [];\n\t\t\tfor (const [i, target] of targets.entries()) {\n\t\t\t\tthis.battle.activeTarget = target;\n\t\t\t\t// calculate true accuracy\n\t\t\t\tlet accuracy = move.accuracy;\n\t\t\t\tif (move.ohko) { // bypasses accuracy modifiers\n\t\t\t\t\tif (!target.isSemiInvulnerable()) {\n\t\t\t\t\t\taccuracy = 30;\n\t\t\t\t\t\tif (move.ohko === 'Ice' && this.battle.gen >= 7 && !pokemon.hasType('Ice')) {\n\t\t\t\t\t\t\taccuracy = 20;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!target.volatiles['dynamax'] && pokemon.level >= target.level &&\n\t\t\t\t\t\t\t(move.ohko === true || !target.hasType(move.ohko))) {\n\t\t\t\t\t\t\taccuracy += (pokemon.level - target.level);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.battle.add('-immune', target, '[ohko]');\n\t\t\t\t\t\t\thitResults[i] = false;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\taccuracy = this.battle.runEvent('ModifyAccuracy', target, pokemon, move, accuracy);\n\t\t\t\t\tif (accuracy !== true) {\n\t\t\t\t\t\tlet boost = 0;\n\t\t\t\t\t\tif (!move.ignoreAccuracy) {\n\t\t\t\t\t\t\tconst boosts = this.battle.runEvent('ModifyBoost', pokemon, null, null, {...pokemon.boosts});\n\t\t\t\t\t\t\tboost = this.battle.clampIntRange(boosts['accuracy'], -6, 6);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!move.ignoreEvasion) {\n\t\t\t\t\t\t\tconst boosts = this.battle.runEvent('ModifyBoost', target, null, null, {...target.boosts});\n\t\t\t\t\t\t\tboost = this.battle.clampIntRange(boost - boosts['evasion'], -6, 6);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (boost > 0) {\n\t\t\t\t\t\t\taccuracy = this.battle.trunc(accuracy * (3 + boost) / 3);\n\t\t\t\t\t\t} else if (boost < 0) {\n\t\t\t\t\t\t\taccuracy = this.battle.trunc(accuracy * 3 / (3 - boost));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (move.alwaysHit || (move.id === 'toxic' && this.battle.gen >= 8 && pokemon.hasType('Poison')) ||\n\t\t\t\t\t\t(move.target === 'self' && move.category === 'Status' && !target.isSemiInvulnerable())) {\n\t\t\t\t\taccuracy = true; // bypasses ohko accuracy modifiers\n\t\t\t\t} else {\n\t\t\t\t\taccuracy = this.battle.runEvent('Accuracy', target, pokemon, move, accuracy);\n\t\t\t\t}\n\t\t\t\tif (accuracy !== true) pokemon.side.addMiss(100 - accuracy);\n\t\t\t\tif (pokemon.side.miss >= 100) {\n\t\t\t\t\tpokemon.side.subtractMiss(100);\n\t\t\t\t\tif (move.smartTarget) {\n\t\t\t\t\t\tmove.smartTarget = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!move.spreadHit) this.battle.attrLastMove('[miss]');\n\t\t\t\t\t\tthis.battle.add('-miss', pokemon, target);\n\t\t\t\t\t}\n\t\t\t\t\tif (!move.ohko && pokemon.hasItem('blunderpolicy') && pokemon.useItem()) {\n\t\t\t\t\t\tthis.battle.boost({spe: 2}, pokemon);\n\t\t\t\t\t}\n\t\t\t\t\thitResults[i] = false;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\thitResults[i] = true;\n\t\t\t}\n\t\t\treturn hitResults;\n\t\t},\n\t\thitStepMoveHitLoop(targets: Pokemon[], pokemon: Pokemon, move: ActiveMove) { // Temporary name\n\t\t\tlet damage: (number | boolean | undefined)[] = [];\n\t\t\tfor (const i of targets.keys()) {\n\t\t\t\tdamage[i] = 0;\n\t\t\t}\n\t\t\tmove.totalDamage = 0;\n\t\t\tpokemon.lastDamage = 0;\n\t\t\tlet targetHits = move.multihit || 1;\n\t\t\tif (Array.isArray(targetHits)) {\n\t\t\t\t// yes, it's hardcoded... meh\n\t\t\t\tif (targetHits[0] === 2 && targetHits[1] === 5) {\n\t\t\t\t\tif (this.battle.gen >= 5) {\n\t\t\t\t\t\t// 35-35-15-15 out of 100 for 2-3-4-5 hits\n\t\t\t\t\t\ttargetHits = this.battle.sample([2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 5, 5, 5]);\n\t\t\t\t\t\tif (targetHits < 4 && pokemon.hasItem('loadeddice')) {\n\t\t\t\t\t\t\ttargetHits = 5 - this.battle.random(2);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttargetHits = this.battle.sample([2, 2, 2, 3, 3, 3, 4, 5]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttargetHits = this.battle.random(targetHits[0], targetHits[1] + 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (targetHits === 10 && pokemon.hasItem('loadeddice')) targetHits -= this.battle.random(7);\n\t\t\ttargetHits = Math.floor(targetHits);\n\t\t\tlet nullDamage = true;\n\t\t\tlet moveDamage: (number | boolean | undefined)[] = [];\n\t\t\t// There is no need to recursively check the \u00B4sleepUsable\u00B4 flag as Sleep Talk can only be used while asleep.\n\t\t\tconst isSleepUsable = move.sleepUsable || this.dex.moves.get(move.sourceEffect).sleepUsable;\n\n\t\t\tlet targetsCopy: (Pokemon | false | null)[] = targets.slice(0);\n\t\t\tlet hit: number;\n\t\t\t\n\t\t\tlet moveName = (move.name.split(\" \")[1]) ? move.name.split(\" \")[1].toLowerCase() : move.name.toLowerCase();\n\t\t\tlet suffix = \"1st \" + moveName;\n\t\t\tlet accuracies = [];\n\t\t\tlet change = false;\n\t\t\t\n\t\t\tfor (hit = 1; hit <= targetHits; hit++) {\n\t\t\t\tif (damage.includes(false)) break;\n\t\t\t\tif (hit > 1 && pokemon.status === 'slp' && (!isSleepUsable || this.battle.gen === 4)) break;\n\t\t\t\tif (targets.every(target => !target?.hp)) break;\n\t\t\t\tmove.hit = hit;\n\t\t\t\tif (move.smartTarget && targets.length > 1) {\n\t\t\t\t\ttargetsCopy = [targets[hit - 1]];\n\t\t\t\t\tdamage = [damage[hit - 1]];\n\t\t\t\t} else {\n\t\t\t\t\ttargetsCopy = targets.slice(0);\n\t\t\t\t}\n\t\t\t\tconst target = targetsCopy[0]; // some relevant-to-single-target-moves-only things are hardcoded\n\t\t\t\tif (target && typeof move.smartTarget === 'boolean') {\n\t\t\t\t\tif (hit > 1) {\n\t\t\t\t\t\tthis.battle.addMove('-anim', pokemon, move.name, target);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.battle.retargetLastMove(target);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// like this (Triple Kick)\n\t\t\t\tif (target && move.multiaccuracy && hit > 1) {\n\t\t\t\t\tlet accuracy = move.accuracy;\n\t\t\t\t\tconst boostTable = [1, 4 / 3, 5 / 3, 2, 7 / 3, 8 / 3, 3];\n\t\t\t\t\tif (accuracy !== true) {\n\t\t\t\t\t\tif (!move.ignoreAccuracy) {\n\t\t\t\t\t\t\tconst boosts = this.battle.runEvent('ModifyBoost', pokemon, null, null, {...pokemon.boosts});\n\t\t\t\t\t\t\tconst boost = this.battle.clampIntRange(boosts['accuracy'], -6, 6);\n\t\t\t\t\t\t\tif (boost > 0) {\n\t\t\t\t\t\t\t\taccuracy *= boostTable[boost];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\taccuracy /= boostTable[-boost];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!move.ignoreEvasion) {\n\t\t\t\t\t\t\tconst boosts = this.battle.runEvent('ModifyBoost', target, null, null, {...target.boosts});\n\t\t\t\t\t\t\tconst boost = this.battle.clampIntRange(boosts['evasion'], -6, 6);\n\t\t\t\t\t\t\tif (boost > 0) {\n\t\t\t\t\t\t\t\taccuracy /= boostTable[boost];\n\t\t\t\t\t\t\t} else if (boost < 0) {\n\t\t\t\t\t\t\t\taccuracy *= boostTable[-boost];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\taccuracy = this.battle.runEvent('ModifyAccuracy', target, pokemon, move, accuracy);\n\t\t\t\t\tif (!move.alwaysHit) {\n\t\t\t\t\t\taccuracy = this.battle.runEvent('Accuracy', target, pokemon, move, accuracy);\n\t\t\t\t\t\t\n\t\t\t\t\t\tlet ordinal = \"\";\n\t\t\t\t\t\tswitch (hit % 10) {\n\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\tordinal = \"st\";\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tordinal = \"nd\";\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\tordinal = \"rd\";\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tordinal = \"th\";\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (accuracies[accuracies.length - 1] && accuracy / 100 !== accuracies[accuracies.length - 1]) change = true;\n\t\t\t\t\t\taccuracies.push(accuracy / 100);\n\t\t\t\t\t\tlet product = accuracies.reduce((accumulator, current) => accumulator * current, 1) * (100 - accuracy);\n\t\t\t\t\t\tif (targetHits > 3) {\n\t\t\t\t\t\t\tsuffix = (hit - 1) + \" \" + moveName + \"s hit + \" + hit + ordinal + \" \" + moveName;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (!change) {\n\t\t\t\t\t\t\t\tlet multiplication = \"(\" + (accuracy / 100) + \")^\" + (hit - 1) + \" * \" + (100 - accuracy);\n\t\t\t\t\t\t\t\tthis.battle.add('-message', `(${suffix} miss: ${multiplication} = ${product.toFixed(2)})`);\n\t\t\t\t\t\t\t} else this.battle.add('-message', `(${suffix} miss: ${product.toFixed(2)})`);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsuffix += \" hit + \" + hit + ordinal + \" \" + moveName;\n\t\t\t\t\t\t\tlet multiplication = \"\";\n\t\t\t\t\t\t\tfor (const acc of accuracies) {\n\t\t\t\t\t\t\t\tmultiplication += (acc + \" * \");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.battle.add('-message', `(${suffix} miss: ${multiplication}${(100 - accuracy)} = ${product.toFixed(2)})`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpokemon.side.addMiss(product);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (accuracy !== true && pokemon.side.miss >= 100) {\n\t\t\t\t\t\t\tpokemon.side.subtractMiss(100);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst moveData = move;\n\t\t\t\tif (!moveData.flags) moveData.flags = {};\n\n\t\t\t\tlet moveDamageThisHit;\n\t\t\t\t// Modifies targetsCopy (which is why it's a copy)\n\t\t\t\t[moveDamageThisHit, targetsCopy] = this.spreadMoveHit(targetsCopy, pokemon, move, moveData);\n\t\t\t\t// When Dragon Darts targets two different pokemon, targetsCopy is a length 1 array each hit\n\t\t\t\t// so spreadMoveHit returns a length 1 damage array\n\t\t\t\tif (move.smartTarget) {\n\t\t\t\t\tmoveDamage.push(...moveDamageThisHit);\n\t\t\t\t} else {\n\t\t\t\t\tmoveDamage = moveDamageThisHit;\n\t\t\t\t}\n\n\t\t\t\tif (!moveDamage.some(val => val !== false)) break;\n\t\t\t\tnullDamage = false;\n\n\t\t\t\tfor (const [i, md] of moveDamage.entries()) {\n\t\t\t\t\tif (move.smartTarget && i !== hit - 1) continue;\n\t\t\t\t\t// Damage from each hit is individually counted for the\n\t\t\t\t\t// purposes of Counter, Metal Burst, and Mirror Coat.\n\t\t\t\t\tdamage[i] = md === true || !md ? 0 : md;\n\t\t\t\t\t// Total damage dealt is accumulated for the purposes of recoil (Parental Bond).\n\t\t\t\t\tmove.totalDamage += damage[i] as number;\n\t\t\t\t}\n\t\t\t\tif (move.mindBlownRecoil) {\n\t\t\t\t\tconst hpBeforeRecoil = pokemon.hp;\n\t\t\t\t\tthis.battle.damage(Math.round(pokemon.maxhp / 2), pokemon, pokemon, this.dex.conditions.get(move.id), true);\n\t\t\t\t\tmove.mindBlownRecoil = false;\n\t\t\t\t\tif (pokemon.hp <= pokemon.maxhp / 2 && hpBeforeRecoil > pokemon.maxhp / 2) {\n\t\t\t\t\t\tthis.battle.runEvent('EmergencyExit', pokemon, pokemon);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.battle.eachEvent('Update');\n\t\t\t\tif (!pokemon.hp && targets.length === 1) {\n\t\t\t\t\thit++; // report the correct number of hits for multihit moves\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// hit is 1 higher than the actual hit count\n\t\t\tif (hit === 1) return damage.fill(false);\n\t\t\tif (nullDamage) damage.fill(false);\n\t\t\tthis.battle.faintMessages(false, false, !pokemon.hp);\n\t\t\tif (move.multihit && typeof move.smartTarget !== 'boolean') {\n\t\t\t\tthis.battle.add('-hitcount', targets[0], hit - 1);\n\t\t\t}\n\n\t\t\tif ((move.recoil || move.id === 'chloroblast') && move.totalDamage) {\n\t\t\t\tconst hpBeforeRecoil = pokemon.hp;\n\t\t\t\tthis.battle.damage(this.calcRecoilDamage(move.totalDamage, move, pokemon), pokemon, pokemon, 'recoil');\n\t\t\t\tif (pokemon.hp <= pokemon.maxhp / 2 && hpBeforeRecoil > pokemon.maxhp / 2) {\n\t\t\t\t\tthis.battle.runEvent('EmergencyExit', pokemon, pokemon);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (move.struggleRecoil) {\n\t\t\t\tconst hpBeforeRecoil = pokemon.hp;\n\t\t\t\tlet recoilDamage;\n\t\t\t\tif (this.dex.gen >= 5) {\n\t\t\t\t\trecoilDamage = this.battle.clampIntRange(Math.round(pokemon.baseMaxhp / 4), 1);\n\t\t\t\t} else {\n\t\t\t\t\trecoilDamage = this.battle.clampIntRange(this.battle.trunc(pokemon.maxhp / 4), 1);\n\t\t\t\t}\n\t\t\t\tthis.battle.directDamage(recoilDamage, pokemon, pokemon, {id: 'strugglerecoil'} as Condition);\n\t\t\t\tif (pokemon.hp <= pokemon.maxhp / 2 && hpBeforeRecoil > pokemon.maxhp / 2) {\n\t\t\t\t\tthis.battle.runEvent('EmergencyExit', pokemon, pokemon);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// smartTarget messes up targetsCopy, but smartTarget should in theory ensure that targets will never fail, anyway\n\t\t\tif (move.smartTarget) {\n\t\t\t\ttargetsCopy = targets.slice(0);\n\t\t\t}\n\n\t\t\tfor (const [i, target] of targetsCopy.entries()) {\n\t\t\t\tif (target && pokemon !== target) {\n\t\t\t\t\ttarget.gotAttacked(move, moveDamage[i] as number | false | undefined, pokemon);\n\t\t\t\t\tif (typeof moveDamage[i] === 'number') {\n\t\t\t\t\t\ttarget.timesAttacked += move.smartTarget ? 1 : hit - 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (move.ohko && !targets[0].hp) this.battle.add('-ohko');\n\n\t\t\tif (!damage.some(val => !!val || val === 0)) return damage;\n\n\t\t\tthis.battle.eachEvent('Update');\n\n\t\t\tthis.afterMoveSecondaryEvent(targetsCopy.filter(val => !!val) as Pokemon[], pokemon, move);\n\n\t\t\tif (!move.negateSecondary && !(move.hasSheerForce && pokemon.hasAbility('sheerforce'))) {\n\t\t\t\tfor (const [i, d] of damage.entries()) {\n\t\t\t\t\t// There are no multihit spread moves, so it's safe to use move.totalDamage for multihit moves\n\t\t\t\t\t// The previous check was for `move.multihit`, but that fails for Dragon Darts\n\t\t\t\t\tconst curDamage = targets.length === 1 ? move.totalDamage : d;\n\t\t\t\t\tif (typeof curDamage === 'number' && targets[i].hp) {\n\t\t\t\t\t\tconst targetHPBeforeDamage = (targets[i].hurtThisTurn || 0) + curDamage;\n\t\t\t\t\t\tif (targets[i].hp <= targets[i].maxhp / 2 && targetHPBeforeDamage > targets[i].maxhp / 2) {\n\t\t\t\t\t\t\tthis.battle.runEvent('EmergencyExit', targets[i], pokemon);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn damage;\n\t\t},\n\t\tsecondaries(targets: SpreadMoveTargets, source: Pokemon, move: ActiveMove, moveData: ActiveMove, isSelf?: boolean) {\n\t\t\tif (!moveData.secondaries) return;\n\t\t\tfor (const target of targets) {\n\t\t\t\tif (target === false) continue;\n\t\t\t\tconst secondaries: Dex.SecondaryEffect[] =\n\t\t\t\t\tthis.battle.runEvent('ModifySecondaries', target, source, moveData, moveData.secondaries.slice());\n\t\t\t\tfor (const secondary of secondaries) {\n\t\t\t\t\tif (secondary.status && target.status) continue;\n\t\t\t\t\tif (secondary.chance !== 100) source.side.addEffect(secondary.chance);\n\t\t\t\t\tif (typeof secondary.chance === 'undefined' || secondary.chance === 100 || source.side.effect >= 100) {\n\t\t\t\t\t\tsource.side.subtractEffect(100);\n\t\t\t\t\t\tthis.moveHit(target, source, move, secondary, true, isSelf);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetDamage(\n\t\tsource: Pokemon, target: Pokemon, move: string | number | ActiveMove,\n\t\tsuppressMessages = false\n\t\t): number | undefined | null | false {\n\t\t\tif (typeof move === 'string') move = this.dex.getActiveMove(move);\n\n\t\t\tif (typeof move === 'number') {\n\t\t\t\tconst basePower = move;\n\t\t\t\tmove = new Dex.Move({\n\t\t\t\t\tbasePower,\n\t\t\t\t\ttype: '???',\n\t\t\t\t\tcategory: 'Physical',\n\t\t\t\t\twillCrit: false,\n\t\t\t\t}) as ActiveMove;\n\t\t\t\tmove.hit = 0;\n\t\t\t}\n\n\t\t\tif (!move.ignoreImmunity || (move.ignoreImmunity !== true && !move.ignoreImmunity[move.type])) {\n\t\t\t\tif (!target.runImmunity(move.type, !suppressMessages)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (move.ohko) return target.maxhp;\n\t\t\tif (move.damageCallback) return move.damageCallback.call(this.battle, source, target);\n\t\t\tif (move.damage === 'level') {\n\t\t\t\treturn source.level;\n\t\t\t} else if (move.damage) {\n\t\t\t\treturn move.damage;\n\t\t\t}\n\n\t\t\tconst category = this.battle.getCategory(move);\n\n\t\t\tlet basePower: number | false | null = move.basePower;\n\t\t\tif (move.basePowerCallback) {\n\t\t\t\tbasePower = move.basePowerCallback.call(this.battle, source, target, move);\n\t\t\t}\n\t\t\tif (!basePower) return basePower === 0 ? undefined : basePower;\n\t\t\tbasePower = this.battle.clampIntRange(basePower, 1);\n\n\t\t\tlet critMult;\n\t\t\tlet critRatio = this.battle.runEvent('ModifyCritRatio', source, target, move, move.critRatio || 0);\n\t\t\tif (this.battle.gen <= 5) {\n\t\t\t\tcritRatio = this.battle.clampIntRange(critRatio, 0, 5);\n\t\t\t\tcritMult = [0, 16, 8, 4, 3, 2];\n\t\t\t} else {\n\t\t\t\tcritRatio = this.battle.clampIntRange(critRatio, 0, 4);\n\t\t\t\tif (this.battle.gen === 6) {\n\t\t\t\t\tcritMult = [0, 16, 8, 2, 1];\n\t\t\t\t} else {\n\t\t\t\t\tcritMult = [0, 24, 8, 2, 1];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst moveHit = target.getMoveHitData(move);\n\t\t\tmoveHit.crit = move.willCrit || false;\n\t\t\tif (move.willCrit === undefined) {\n\t\t\t\tif (critRatio) {\n\t\t\t\t\tsource.side.addCrit(100 / critMult[critRatio]);\n\t\t\t\t\tif (source.side.crit >= 100) {\n\t\t\t\t\t\tsource.side.subtractCrit(100);\n\t\t\t\t\t\tmoveHit.crit = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (moveHit.crit) {\n\t\t\t\tmoveHit.crit = this.battle.runEvent('CriticalHit', target, null, move);\n\t\t\t}\n\n\t\t\t// happens after crit calculation\n\t\t\tbasePower = this.battle.runEvent('BasePower', source, target, move, basePower, true);\n\n\t\t\tif (!basePower) return 0;\n\t\t\tbasePower = this.battle.clampIntRange(basePower, 1);\n\t\t\t// Hacked Max Moves have 0 base power, even if you Dynamax\n\t\t\tif ((!source.volatiles['dynamax'] && move.isMax) || (move.isMax && this.dex.moves.get(move.baseMove).isMax)) {\n\t\t\t\tbasePower = 0;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tbasePower < 60 && source.getTypes(true).includes(move.type) && source.terastallized && move.priority <= 0 &&\n\t\t\t\t// Hard move.basePower check for moves like Dragon Energy that have variable BP\n\t\t\t\t!move.multihit && !((move.basePower === 0 || move.basePower === 150) && move.basePowerCallback)\n\t\t\t) {\n\t\t\t\tbasePower = 60;\n\t\t\t}\n\n\t\t\tconst level = source.level;\n\n\t\t\tconst attacker = move.overrideOffensivePokemon === 'target' ? target : source;\n\t\t\tconst defender = move.overrideDefensivePokemon === 'source' ? source : target;\n\n\t\t\tconst isPhysical = move.category === 'Physical';\n\t\t\tlet attackStat: StatIDExceptHP = move.overrideOffensiveStat || (isPhysical ? 'atk' : 'spa');\n\t\t\tconst defenseStat: StatIDExceptHP = move.overrideDefensiveStat || (isPhysical ? 'def' : 'spd');\n\n\t\t\tconst statTable = {atk: 'Atk', def: 'Def', spa: 'SpA', spd: 'SpD', spe: 'Spe'};\n\n\t\t\tlet atkBoosts = attacker.boosts[attackStat];\n\t\t\tlet defBoosts = defender.boosts[defenseStat];\n\n\t\t\tlet ignoreNegativeOffensive = !!move.ignoreNegativeOffensive;\n\t\t\tlet ignorePositiveDefensive = !!move.ignorePositiveDefensive;\n\n\t\t\tif (moveHit.crit) {\n\t\t\t\tignoreNegativeOffensive = true;\n\t\t\t\tignorePositiveDefensive = true;\n\t\t\t}\n\t\t\tconst ignoreOffensive = !!(move.ignoreOffensive || (ignoreNegativeOffensive && atkBoosts < 0));\n\t\t\tconst ignoreDefensive = !!(move.ignoreDefensive || (ignorePositiveDefensive && defBoosts > 0));\n\n\t\t\tif (ignoreOffensive) {\n\t\t\t\tthis.battle.debug('Negating (sp)atk boost/penalty.');\n\t\t\t\tatkBoosts = 0;\n\t\t\t}\n\t\t\tif (ignoreDefensive) {\n\t\t\t\tthis.battle.debug('Negating (sp)def boost/penalty.');\n\t\t\t\tdefBoosts = 0;\n\t\t\t}\n\n\t\t\tlet attack = attacker.calculateStat(attackStat, atkBoosts, 1, source);\n\t\t\tlet defense = defender.calculateStat(defenseStat, defBoosts, 1, target);\n\n\t\t\tattackStat = (category === 'Physical' ? 'atk' : 'spa');\n\n\t\t\t// Apply Stat Modifiers\n\t\t\tattack = this.battle.runEvent('Modify' + statTable[attackStat], source, target, move, attack);\n\t\t\tdefense = this.battle.runEvent('Modify' + statTable[defenseStat], target, source, move, defense);\n\n\t\t\tif (this.battle.gen <= 4 && ['explosion', 'selfdestruct'].includes(move.id) && defenseStat === 'def') {\n\t\t\t\tdefense = this.battle.clampIntRange(Math.floor(defense / 2), 1);\n\t\t\t}\n\n\t\t\tconst tr = this.battle.trunc;\n\n\t\t\t// int(int(int(2 * L / 5 + 2) * A * P / D) / 50);\n\t\t\tconst baseDamage = tr(tr(tr(tr(2 * level / 5 + 2) * basePower * attack) / defense) / 50);\n\n\t\t\t// Calculate damage modifiers separately (order differs between generations)\n\t\t\treturn this.modifyDamage(baseDamage, source, target, move, suppressMessages);\n\t\t},\n\t},\n};"],
  "mappings": "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",
  "names": ["target", "basePower"]
}
