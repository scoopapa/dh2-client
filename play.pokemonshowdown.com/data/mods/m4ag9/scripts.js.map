{
  "version": 3,
  "sources": ["../../../../data/mods/m4ag9/scripts.ts"],
  "sourcesContent": ["import {toID} from '../../../sim/dex-data';\n\n// tiering information\nconst ag9 = [\"calyrexshadow\", \"gengarmega\", \"koraidon\", \"miraidon\", \"rayquazamega\", \"xerneas\"];\nconst uber9 = [\n\t// M4A first\n\t\"dragapultmega\", \n\t// Natdex second\n\t\"alakazammega\", \"annihilape\", \"arceus\", \"arceusfire\", \"arceuswater\", \"arceuselectric\", \"arceusgrass\", \"arceusice\", \"arceusfighting\", \"arceuspoison\", \n\t\"arceusground\", \"arceusflying\", \"arceuspsychic\", \"arceusbug\", \"arceusrock\", \"arceusghost\", \"arceusdragon\", \"arceusdark\", \"arceussteel\", \"arceusfairy\",\n\t\"baxcalibur\", \"blastoisemega\", \"blazikenmega\", \"calyrexice\", \"chienpao\", \"chiyu\", \"darkrai\", \"darmanitangalar\", \"deoxys\", \"deoxysattack\", \"deoxysspeed\", \"dialga\", \n\t\"dialgaorigin\", \"dracovish\", \"dragapult\", \"espathra\", \"eternatus\", \"fluttermane\", \"genesect\", \"genesectburn\", \"genesectchill\", \"genesectdouse\", \"genesectshock\", \"giratina\", \n\t\"giratinaorigin\", \"gougingfire\", \"groudon\", \"groudonprimal\", \"hooh\", \"ironbundle\", \"kangaskhanmega\", \"kyogre\", \"kyogreprimal\", \"kyuremblack\", \"kyuremwhite\", \n\t\"landorus\", \"lucariomega\", \"lugia\", \"lunala\", \"magearna\", \"magearnaoriginal\", \"marshadow\", \"metagrossmega\", \"mewtwo\", \"mewtwomegax\", \"mewtwomegay\", \"naganadel\", \n\t\"necrozmadawnwings\", \"necrozmaduskmane\", \"necrozmaultra\", \"ogerponheartflame\", \"ogerpontera\", \"ogerponheartflametera\", \"ogerponcornerstonetera\", \"ogerponwellspringtera\", \n\t\"palafin\", \"palafinhero\", \"palkia\", \"palkiaorigin\", \"pheromosa\", \"rayquaza\", \"reshiram\", \"roaringmoon\", \"salamencemega\", \"shayminsky\", \"sneasler\", \"solgaleo\", \"spectrier\", \n\t\"terapagosstellar\", \"ursalunabloodmoon\", \"urshifu\", \"walkingwake\", \"yveltal\", \"zacian\", \"zaciancrowned\", \"zamazentacrowned\", \"zekrom\", \"zygarde\", \"zygardecomplete\", \t\n];\nconst viabilityList9 = [\n\t\"alomomola\", \"clodsire\", \"corviknight\", \"dragonite\", \"ferrothorn\", \"garchomp\", \"gholdengo\", \"gliscor\", \"greattusk\", \"hatterene\", \"heatran\", \"irontreads\", \"ironvaliant\", \n\t\"kartana\", \"kingambit\", \"kyurem\", \"landorustherian\", \"melmetal\", \"moltres\", \"ogerponwellspring\", \"ragingbolt\", \"samurotthisui\", \"slowkinggalar\", \"tapufini\", \"tapulele\", \n\t\"tapukoko\", \"terapagos\", \"terapagosterastal\", \"tinglu\", \"toxapex\", \"urshifurapidstrike\", \"volcarona\", \"zamazenta\", \"zapdos\", \n];\nconst megaViabilityList9 = [\n\t\"araquanidmega\", \"bastiodonmega\", \"bibarelmega\", \"butterfreemega\", \"chandeluremega\", \"charizardmegay\", \"cinderacemega\", \"clefablemega\", \"conkeldurrmega\", \n\t\"corviknightmega\", \"dhelmisemega\", \"dianciemega\", \"dodriomega\", \"dragalgemega\",\t\"eelektrossmega\", \"empoleonmega\", \"falinksmega\", \"flygonmega\", \n\t\"froslassmega\", \"garbodormega\", \"hawluchamega\", \"honchkrowmega\", \"hydreigonmega\", \"infernapemega\", \"inteleonmega\", \"krookodilemega\", \"lanturnmega\", \"latiosmega\", \n\t\"lopunnymega\", \"lurantismega\", \"luxraymega\", \"lycanrocmega\", \"magmortarmega\", \"meowsticmega\", \"mimikyumega\", \"mimikyumegabusted\", \"nidoqueenmega\", \"noivernmega\", \n\t\"orbeetlemega\", \"raichumega\", \"regicemega\", \"reuniclusmega\", \"scizormega\", \"sirfetchdmega\", \"slowkingmega\", \"slowkinggalarmega\", \"staraptormega\", \"starmiemega\", \n\t\"stoutlandmega\", \"talonflamemega\", \"typhlosionmega\", \"tyrantrummega\", \"vanilluxemega\", \"wailordmega\",\n];\n/*\n// doubles tiers (currently unused because the teambuilder doesn't support them well)\nconst vgcbanned = [\"mew\", \"celebi\", \"jirachi\", \"deoxys\", \"deoxysattack\", \"deoxysdefense\", \"deoxysspeed\", \"phione\", \"manaphy\", \"darkrai\", \"shaymin\", \"shayminsky\", \"victini\", \"keldeo\", \"keldeoresolute\", \"meloetta\", \"greninjaash\", \"diancie\", \"dianciemega\", \"hoopa\", \"hoopaunbound\", \"volcanion\", \"magearna\", \"magearnaoriginal\", \"marshadow\", \"zeraora\", \"zarude\", \"arceus\", \"arceusfire\", \"arceuswater\", \"arceuselectric\", \"arceusgrass\", \"arceusice\", \"arceusfighting\", \"arceuspoison\", \"arceusground\", \"arceusflying\", \"arceuspsychic\", \"arceusbug\", \"arceusrock\", \"arceusghost\", \"arceusdragon\", \"arceusdark\", \"arceussteel\", \"arceusfairy\", \"genesect\", \"genesectburn\", \"genesectchill\", \"genesectdouse\", \"genesectshock\"];\nconst restricted = [\"mewtwo\", \"hooh\", \"lugia\", \"kyogre\", \"kyogreprimal\", \"groudon\", \"groudonprimal\", \"rayquaza\", \"rayquazamega\", \"dialga\", \"palkia\", \"giratina\", \"giratinaorigin\", \"reshiram\", \"zekrom\", \"kyurem\", \"kyuremblack\", \"kyuremwhite\", \"xerneas\", \"yveltal\", \"zygarde\", \"zygarde10\", \"zygardecomplete\", \"cosmog\", \"cosmoem\", \"solgaleo\", \"lunala\", \"necrozma\", \"necrozmadawnwings\", \"necrozmaduskmane\", \"necrozmaultra\", \"zacian\", \"zaciancrowned\", \"zamazenta\", \"zamazentacrowned\", \"eternatus\", \"calyrex\", \"calyrexice\", \"calyrexshadow\"];\nconst s = [\"incineroar\", \"dhelmisemega\", \"slowkingmega\", \"tapufini\"];\nconst aplus = [\"blastoise\", \"moltresgalar\", \"glastrier\", \"ninetalesalolamega\", \"mawilemega\", \"rillaboommega\", \"regieleki\", \"spectrier\", \"urshifu\", \"whimsicott\"];\nconst a = [\"amoonguss\", \"aurorusmega\", \"empoleonmega\", \"falinksmegalegion\", \"metagrossmega\"];\nconst aminus = [\"aegislash\", \"clefairy\", \"comfey\", \"dusclops\", \"grimmsnarl\", \"hatterene\", \"kartana\", \"landorustherian\", \"charizardmegay\", \"cinderacemega\", \"gengarmega\", \"gigalithmega\", \"kangaskhanmega\", \"orbeetlemega\", \"reuniclusmega\", \"murkrow\"];\nconst bplus = [\"arctovish\", \"arctozolt\", \"dracovish\", \"dracozolt\", \"excadrill\", \"indeedeef\", \"kommoo\", \"ludicolo\", \"hawluchamega\", \"luxraymega\", \"salamencemega\", \"politoed\", \"tapulele\", \"torkoal\", \"venusaur\"];\nconst b = [\"araquanid\", \"gothitelle\", \"hitmontop\", \"kingdra\", \"dragonitemega\", \"meowsticfmega\", \"pelipper\", \"porygon2\", \"rillaboom\", \"rotomheat\", \"stakataka\", \"urshifurapidstrike\", \"zapdos\"];\nconst bminus = [\"cresselia\", \"dragapult\", \"ferrothorn\", \"weezinggalar\", \"gastrodon\", \"araquanidmega\", \"corviknightmega\", \"flygonmega\", \"mudsdalemega\", \"samurottmega\", \"milotic\", \"raichu\", \"rotomwash\", \"tapubulu\", \"togekiss\", \"tsareena\", \"weezing\"];\nconst c = [\"aerodactyl\", \"marowakalola\", \"bronzong\", \"coalossal\", \"celesteela\", \"crobat\", \"articunogalar\", \"zapdosgalar\", \"gyarados\", \"heatran\", \"jellicent\", \"liepard\", \"dragalgemega\", \"hydreigonmega\", \"honchkrowmega\", \"leavannymega\", \"registeelmega\", \"swampertmega\", \"meowsticm\", \"ninetales\", \"regigigas\", \"sirfetchd\", \"slaking\", \"staraptor\", \"suicune\", \"terrakion\", \"tornadus\", \"weavile\"];\n*/\n\nexport const Scripts: ModdedBattleScriptsData = {\n\tinherit: 'm4av6',\n\tgen: 9,\n\tteambuilderConfig: {\n\t\texcludeStandardTiers: true,\n\t\tcustomTiers: ['Mega of the Day!', 'Popular', 'Popular Megas', 'Other Megas', 'Heat!', 'NFE'],\n\t},\n\tinit() {\n\t\tif (this.dataCache.Pokedex.quaquavalmega) return; // don't bother generating the dex if it's already stored!\n\t\tlet megaList = [];\n\t\tfor (const id in this.dataCache.Pokedex) {\n\t\t\tconst pokemon = this.dataCache.Pokedex[id];\n\n\t\t\t// modding\n\t\t\tif (pokemon.movepoolAdditions) {\n\t\t\t\tfor (const move of pokemon.movepoolAdditions) {\n\t\t\t\t\tthis.modData('Learnsets', this.toID(id)).learnset[this.toID(move)] = [\"8M\"];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// generating Megas\n\t\t\tif (pokemon && pokemon.mega) {\n\t\t\t\tconst newMega = this.dataCache.Pokedex[pokemon.mega] = {name: pokemon.megaName};\n\n\t\t\t\tpokemon.otherFormes = pokemon.otherFormes ? pokemon.otherFormes.concat([newMega.name]) : [pokemon.megaName];\n\t\t\t\tpokemon.formeOrder = pokemon.formeOrder ? pokemon.formeOrder.concat([newMega.name]) : [pokemon.name, pokemon.megaName];\n\n\t\t\t\tnewMega.num = pokemon.num;\n\t\t\t\tnewMega.baseSpecies = pokemon.name;\n\t\t\t\tnewMega.forme = \"Mega\";\n\n\t\t\t\tnewMega.types = pokemon.megaType || pokemon.types;\n\t\t\t\tnewMega.abilities = pokemon.megaAbility || pokemon.abilities;\n\t\t\t\tnewMega.baseStats = pokemon.megaStats || pokemon.baseStats;\n\t\t\t\tnewMega.heightm = pokemon.megaHeightm || pokemon.heightm;\n\t\t\t\tnewMega.weightkg = pokemon.megaWeightkg || pokemon.weightkg;\n\t\t\t\tnewMega.eggGroups = pokemon.eggGroups;\n\t\t\t\tnewMega.color = pokemon.megaColor || pokemon.color;\n\t\t\t\tnewMega.battleOnly = pokemon.name; // just in case\n\n\t\t\t\tnewMega.creator = pokemon.megaCreator || null;\n\t\t\t\tnewMega.requiredItem = pokemon.megaStone || null;\n\t\t\t\tif (!this.modData('FormatsData', pokemon.mega)) this.data.FormatsData[pokemon.mega] = { };\n\n\t\t\t\tif (uber9.includes(pokemon.mega)) this.modData('FormatsData', pokemon.mega).tier = \"Uber\";\n\t\t\t\telse {\n\t\t\t\t\tmegaList.push(pokemon.mega);\n\t\t\t\t\tif (megaViabilityList9.includes(pokemon.mega)) this.modData('FormatsData', pokemon.mega).tier = \"Popular Megas\";\n\t\t\t\t\telse this.modData('FormatsData', pokemon.mega).tier = \"Other Megas\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// tiering\n\t\t\tif (!this.modData('FormatsData', id) && this.dataCache.Pokedex[id].creator) this.data.FormatsData[id] = { }; // for non-dynamic Pok\u00E9mon like Sawsbuck\n\t\t\tif (this.modData('FormatsData', id)) {\n\t\t\t\tif (this.modData('FormatsData', id).isNonstandard === 'Past') this.modData('FormatsData', id).isNonstandard = null;\n\t\t\t\t// singles tiers\n\t\t\t\tif (ag9.includes(id)) this.modData('FormatsData', id).tier = \"AG\";\n\t\t\t\telse if (uber9.includes(id)) this.modData('FormatsData', id).tier = \"Uber\";\n\t\t\t\telse if (viabilityList9.includes(id)) this.modData('FormatsData', id).tier = \"Popular\";\n\t\t\t\telse if (megaViabilityList9.includes(id)) this.modData('FormatsData', id).tier = \"Popular Megas\";\n\t\t\t\telse if (this.dataCache.Pokedex[id] && this.dataCache.Pokedex[id].name.includes('-Mega')) this.modData('FormatsData', id).tier = \"Other Megas\";\n\t\t\t\telse if (!this.modData('FormatsData', id).isNonstandard && this.dataCache.Pokedex[id] && !this.dataCache.Pokedex[id].evos && !id.startsWith('pikachu') && !id.startsWith('meltan')) this.modData('FormatsData', id).tier = \"Heat!\"; // default (FE)\n\t\t\t\telse if (!this.modData('FormatsData', id).isNonstandard) this.modData('FormatsData', id).tier = \"NFE\"; // default (NFE)\n\t\t\t\tif (id === 'crucibellemega') this.modData('FormatsData', id).tier = \"CAP\"; // hard-coding for things that don't exist\n\t\t\t}\n\t\t}\n\t\t// up to three Megas of the Day\n\t\tlet random1 = Math.floor(Math.random() * megaList.length);\n\t\tlet random2 = Math.floor(Math.random() * (megaList.length - 1));\n\t\tlet random3 = Math.floor(Math.random() * (megaList.length - 2));\n\t\tif (random2 >= random1) random2 += 1;\n\t\tif (random3 >= random1) random3 += 1;\n\t\tif (random3 >= random2) random3 += 1;\n\t\tthis.modData('FormatsData', megaList[random1]).tier = \"Mega of the Day!\";\n\t\tthis.modData('FormatsData', megaList[random2]).tier = \"Mega of the Day!\";\n\t\tthis.modData('FormatsData', megaList[random3]).tier = \"Mega of the Day!\";\n\t// console.log('Megas of the Day: ' + megaList[random1] + ', ' + megaList[random2] + ', ' + megaList[random3]); \n\t},\n\n\tactions: {\n\tcanMegaEvo(pokemon) {\n\t\tconst altForme = pokemon.baseSpecies.otherFormes && this.dex.species.get(pokemon.baseSpecies.otherFormes[0]);\n\t\tconst item = pokemon.getItem();\n\t\tif (\n\t\t  altForme?.isMega && altForme?.requiredMove &&\n\t\t  pokemon.baseMoves.includes(this.dex.toID(altForme.requiredMove)) && !item.zMove\n\t\t) {\n\t\t\treturn altForme.name;\n\t\t}\n\t\tif (item.name === \"Lycanite\" && pokemon.species.name === \"Lycanroc-Midnight\") return \"Lycanroc-Midnight-Mega\";\n\t\tif (item.name === \"Lycanite\" && pokemon.species.name === \"Lycanroc-Dusk\") return \"Lycanroc-Dusk-Mega\";\n\t\tif (item.name === \"Raichunite\" && pokemon.species.name === \"Raichu-Alola\") return null;\n\t\tif (item.name === \"Slowbronite\" && pokemon.species.name === \"Slowbro-Galar\") return null;\n\t\tif (item.name === \"Slowkinite\" && pokemon.species.name === \"Slowking-Galar\") return \"Slowking-Galar-Mega\";\n\t\tif (item.name === \"Gourgeite\" && pokemon.species.name === \"Gourgeist-Small\") return \"Gourgeist-Small-Mega\";\n\t\tif (item.name === \"Gourgeite\" && pokemon.species.name === \"Gourgeist-Large\") return \"Gourgeist-Large-Mega\";\n\t\tif (item.name === \"Gourgeite\" && pokemon.species.name === \"Gourgeist-Super\") return \"Gourgeist-Super-Mega\";\n\t\tif (item.name === \"Reginite\") {\n\t\t\t\tif (pokemon.species.name === \"Regice\") return \"Regice-Mega\";\n\t\t\t\tif (pokemon.species.name === \"Registeel\") return \"Registeel-Mega\";\n\t\t}\n\t\tif (item.name === \"Meowsticite\" && pokemon.species.name === \"Meowstic-F\") return \"Meowstic-F-Mega\";\n\t\tif (item.name === \"Sawsbuckite\" && pokemon.species.id === \"sawsbucksummer\") return \"Sawsbuck-Summer-Mega\";\n\t\tif (item.name === \"Sawsbuckite\" && pokemon.species.id === \"sawsbuckautumn\") return \"Sawsbuck-Autumn-Mega\";\n\t\tif (item.name === \"Sawsbuckite\" && pokemon.species.id === \"sawsbuckwinter\") return \"Sawsbuck-Winter-Mega\";\n\t\tif (item.name === \"Toxtricitite\" && pokemon.species.name === \"Toxtricity-Low-Key\") return \"Toxtricity-Low-Key-Mega\";\n\t\tif (item.name === \"Ninetalesite\" && pokemon.species.name === \"Ninetales-Alola\") return \"Ninetales-Alola-Mega\";\n\t\tif (item.name === \"Dugtrionite\" && pokemon.species.name === \"Dugtrio-Alola\") return \"Dugtrio-Alola-Mega\";\n\t\tif (item.name === \"Rapidashinite\" && pokemon.species.name === \"Rapidash-Galar\") return null;\n\t\tif (item.name === \"Wormadamite\") {\n\t\t\tif (pokemon.species.name === \"Wormadam-Sandy\") return \"Wormadam-Sandy-Mega\";\n\t\t\telse return null;\n\t\t}\n\t\tif (item.name === \"Hoopanite\" && pokemon.species.name === \"Hoopa-Unbound\") return null;\n\t\tif (item.name === \"Arcanite\" && pokemon.species.name === \"Arcanine-Hisui\") return null;\n\t\tif (item.megaEvolves !== pokemon.species.name || item.megaStone === pokemon.species.name) {\n\t\t\treturn null;\n\t\t}\n\t\treturn item.megaStone;\n\t},\n\trunMegaEvo(pokemon: Pokemon) {\n\t\tconst speciesid = pokemon.canMegaEvo || pokemon.canUltraBurst;\n\t\tif (!speciesid) return false;\n\n\t\tif (pokemon.illusion) this.battle.singleEvent('End', this.battle.dex.abilities.get('Illusion'), pokemon.abilityState, pokemon);\n\t\tpokemon.formeChange(speciesid, pokemon.getItem(), true);\n\n\t\t// Limit one mega evolution\n\t\tconst wasMega = pokemon.canMegaEvo;\n\t\tfor (const ally of pokemon.side.pokemon) {\n\t\t\tif (wasMega) {\n\t\t\t\tally.canMegaEvo = null;\n\t\t\t} else {\n\t\t\t\tally.canUltraBurst = null;\n\t\t\t}\n\t\t}\n\n\t\tthis.battle.runEvent('AfterMega', pokemon);\n\t\treturn true;\n\t},\n\t},\n\n\t getDamage(\n\t\tsource: Pokemon, target: Pokemon, move: string | number | ActiveMove,\n\t\tsuppressMessages = false\n\t): number | undefined | null | false {\n\t\tif (typeof move === 'string') move = this.dex.getActiveMove(move);\n\n\t\tif (typeof move === 'number') {\n\t\t\tconst basePower = move;\n\t\t\tmove = new Dex.Move({\n\t\t\t\tbasePower,\n\t\t\t\ttype: '???',\n\t\t\t\tcategory: 'Physical',\n\t\t\t\twillCrit: false,\n\t\t\t}) as ActiveMove;\n\t\t\tmove.hit = 0;\n\t\t}\n\n\t\tif (!move.ignoreImmunity || (move.ignoreImmunity !== true && !move.ignoreImmunity[move.type])) {\n\t\t\tif (!target.runImmunity(move.type, !suppressMessages)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tif (move.ohko) return target.maxhp;\n\t\tif (move.damageCallback) return move.damageCallback.call(this.battle, source, target);\n\t\tif (move.damage === 'level') {\n\t\t\treturn source.level;\n\t\t} else if (move.damage) {\n\t\t\treturn move.damage;\n\t\t}\n\n\t\tconst category = this.battle.getCategory(move);\n\n\t\tlet basePower: number | false | null = move.basePower;\n\t\tif (move.basePowerCallback) {\n\t\t\tbasePower = move.basePowerCallback.call(this.battle, source, target, move);\n\t\t}\n\t\tif (!basePower) return basePower === 0 ? undefined : basePower;\n\t\tbasePower = this.battle.clampIntRange(basePower, 1);\n\n\t\tlet critMult;\n\t\tlet critRatio = this.battle.runEvent('ModifyCritRatio', source, target, move, move.critRatio || 0);\n\t\tif (this.battle.gen <= 5) {\n\t\t\tcritRatio = this.battle.clampIntRange(critRatio, 0, 5);\n\t\t\tcritMult = [0, 16, 8, 4, 3, 2];\n\t\t} else {\n\t\t\tcritRatio = this.battle.clampIntRange(critRatio, 0, 4);\n\t\t\tif (this.battle.gen === 6) {\n\t\t\t\tcritMult = [0, 16, 8, 2, 1];\n\t\t\t} else {\n\t\t\t\tcritMult = [0, 24, 8, 2, 1];\n\t\t\t}\n\t\t}\n\n\t\tconst moveHit = target.getMoveHitData(move);\n\t\tmoveHit.crit = move.willCrit || false;\n\t\tif (move.willCrit === undefined) {\n\t\t\tif (critRatio) {\n\t\t\t\tmoveHit.crit = this.battle.randomChance(1, critMult[critRatio]);\n\t\t\t}\n\t\t}\n\n\t\tif (moveHit.crit) {\n\t\t\tmoveHit.crit = this.battle.runEvent('CriticalHit', target, null, move);\n\t\t}\n\n\t\t// happens after crit calculation\n\t\tbasePower = this.battle.runEvent('BasePower', source, target, move, basePower, true);\n\n\t\tif (!basePower) return 0;\n\t\tbasePower = this.battle.clampIntRange(basePower, 1);\n\t\t// Hacked Max Moves have 0 base power, even if you Dynamax\n\t\tif ((!source.volatiles['dynamax'] && move.isMax) || (move.isMax && this.dex.moves.get(move.baseMove).isMax)) {\n\t\t\tbasePower = 0;\n\t\t}\n\n\t\tif (\n\t\t\tbasePower < 60 && source.getTypes(true).includes(move.type) && source.terastallized && move.priority <= 0 &&\n\t\t\t// Hard move.basePower check for moves like Dragon Energy that have variable BP\n\t\t\t!move.multihit && !((move.basePower === 0 || move.basePower === 150) && move.basePowerCallback)\n\t\t) {\n\t\t\tbasePower = 60;\n\t\t}\n\n\t\tconst level = source.level;\n\n\t\tconst attacker = move.overrideOffensivePokemon === 'target' ? target : source;\n\t\tconst defender = move.overrideDefensivePokemon === 'source' ? source : target;\n\n\t\tconst isPhysical = move.category === 'Physical';\n\t\tlet attackStat: StatIDExceptHP = move.overrideOffensiveStat || (isPhysical ? 'atk' : 'spa');\n\t\tif (move.useTargetOffensive || (move as any).settleBoosted) attackStat = 'atk'; // hard-coding for M4A\n\t\tconst defenseStat: StatIDExceptHP = move.overrideDefensiveStat || (isPhysical ? 'def' : 'spd');\n\n\t\tconst statTable = {atk: 'Atk', def: 'Def', spa: 'SpA', spd: 'SpD', spe: 'Spe'};\n\n\t\tlet atkBoosts = attacker.boosts[attackStat];\n\t\tif ((move as any).bodyofwaterBoosted) { // hard-coding for M4A\n\t\t\tif (attackStat === 'def') {\n\t\t\t\tatkBoosts = attacker.boosts['atk'];\n\t\t\t} else if (attackStat === 'spd') {\n\t\t\t\tatkBoosts = attacker.boosts['spa'];\n\t\t\t}\n\t\t}\n\t\tlet defBoosts = defender.boosts[defenseStat];\n\n\t\tlet ignoreNegativeOffensive = !!move.ignoreNegativeOffensive;\n\t\tlet ignorePositiveDefensive = !!move.ignorePositiveDefensive;\n\n\t\tif (moveHit.crit) {\n\t\t\tignoreNegativeOffensive = true;\n\t\t\tignorePositiveDefensive = true;\n\t\t}\n\t\tconst ignoreOffensive = !!(move.ignoreOffensive || (ignoreNegativeOffensive && atkBoosts < 0));\n\t\tconst ignoreDefensive = !!(move.ignoreDefensive || (ignorePositiveDefensive && defBoosts > 0));\n\n\t\tif (ignoreOffensive) {\n\t\t\tthis.battle.debug('Negating (sp)atk boost/penalty.');\n\t\t\tatkBoosts = 0;\n\t\t}\n\t\tif (ignoreDefensive) {\n\t\t\tthis.battle.debug('Negating (sp)def boost/penalty.');\n\t\t\tdefBoosts = 0;\n\t\t}\n\n\t\tlet attack = attacker.calculateStat(attackStat, atkBoosts, 1, source);\n\t\tlet defense = defender.calculateStat(defenseStat, defBoosts, 1, target);\n\n\t\tattackStat = (category === 'Physical' ? 'atk' : 'spa');\n\n\t\t// Apply Stat Modifiers\n\t\tattack = this.battle.runEvent('Modify' + statTable[attackStat], source, target, move, attack);\n\t\tdefense = this.battle.runEvent('Modify' + statTable[defenseStat], target, source, move, defense);\n\n\t\tif (this.battle.gen <= 4 && ['explosion', 'selfdestruct'].includes(move.id) && defenseStat === 'def') {\n\t\t\tdefense = this.battle.clampIntRange(Math.floor(defense / 2), 1);\n\t\t}\n\n\t\tconst tr = this.battle.trunc;\n\n\t\t// int(int(int(2 * L / 5 + 2) * A * P / D) / 50);\n\t\tconst baseDamage = tr(tr(tr(tr(2 * level / 5 + 2) * basePower * attack) / defense) / 50);\n\n\t\t// Calculate damage modifiers separately (order differs between generations)\n\t\treturn this.modifyDamage(baseDamage, source, target, move, suppressMessages);\n\t},\n\n\tboost(\n\t\tboost: SparseBoostsTable, target: Pokemon | null = null, source: Pokemon | null = null,\n\t\teffect: Effect | null = null, isSecondary = false, isSelf = false\n\t) {\n\t\tif (this.event) {\n\t\t\tif (!target) target = this.event.target;\n\t\t\tif (!source) source = this.event.source;\n\t\t\tif (!effect) effect = this.effect;\n\t\t}\n\t\tif (!target?.hp) return 0;\n\t\tif (!target.isActive) return false;\n\t\tif (this.gen > 5 && !target.side.foePokemonLeft()) return false;\n\t\tboost = this.runEvent('ChangeBoost', target, source, effect, {...boost});\n\t\tboost = target.getCappedBoost(boost);\n\t\tboost = this.runEvent('TryBoost', target, source, effect, {...boost});\n\t\tlet success = null;\n\t\tlet boosted = isSecondary;\n\t\tlet boostName: BoostID;\n\t\tfor (boostName in boost) {\n\t\t\tconst currentBoost: SparseBoostsTable = {\n\t\t\t\t[boostName]: boost[boostName],\n\t\t\t};\n\t\t\tlet boostBy = target.boostBy(currentBoost);\n\t\t\tlet msg = '-boost';\n\t\t\tif (boost[boostName]! < 0 || target.boosts[boostName] === -6) {\n\t\t\t\tmsg = '-unboost';\n\t\t\t\tboostBy = -boostBy;\n\t\t\t}\n\t\t\tif (target.volatiles['hyperspacemayhem'] && target.volatiles['hyperspacemayhem'].midtransform && !target.volatiles['hyperspacemayhem'].geomancy) {\n\t\t\t\tthis.runEvent('AfterEachBoost', target, source, effect, currentBoost);\n\t\t\t\tif (target.volatiles['hyperspacemayhem'].fakelegend) {\n\t\t\t\t\t// this will be for writing fake boost messages\n\t\t\t\t\tlet boostMessage = target.name;\n\t\t\t\t\tif (effect.effectType === 'Ability' && !boosted) {\n\t\t\t\t\t\tthis.add('-ability', target, effect.name, 'boost');\n\t\t\t\t\t\tboosted = true;\n\t\t\t\t\t}\n\t\t\t\t\tif (boostName === 'atk') boostMessage += `'s Attack`;\n\t\t\t\t\tif (boostName === 'def') boostMessage += `'s Defense`;\n\t\t\t\t\tif (boostName === 'spa') boostMessage += `'s Sp. Atk`;\n\t\t\t\t\tif (boostName === 'spd') boostMessage += `'s Sp. Def`;\n\t\t\t\t\tif (boostName === 'spe') boostMessage += `'s Speed`;\n\t\t\t\t\tif (boostName === 'evasion') boostMessage += `'s evasion`;\n\t\t\t\t\tif (boostName === 'accuracy') boostMessage += `'s accuracy`;\n\t\t\t\t\tif (boostBy === 3 && msg !== '-unboost') boostMessage += ` rose drastically!`;\n\t\t\t\t\tif (boostBy === 2 && msg !== '-unboost') boostMessage += ` rose sharply!`;\n\t\t\t\t\tif (boostBy === 1 && msg !== '-unboost') boostMessage += ` rose!`;\n\t\t\t\t\tif (boostBy === 1 && msg === '-unboost') boostMessage += ` fell!`;\n\t\t\t\t\tif (boostBy === 2 && msg === '-unboost') boostMessage += ` fell harshly!`;\n\t\t\t\t\tif (boostBy === 3 && msg === '-unboost') boostMessage += ` fell severely!`;\n\t\t\t\t\tthis.add('-message', `${boostMessage}`);\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (target.volatiles['hyperspacemayhem'] && target.volatiles['hyperspacemayhem'].geomancy) {\n\t\t\t\ttarget.name = target.volatiles['hyperspacemayhem'].userBackup.name;\n\t\t\t\ttarget.fullname = target.volatiles['hyperspacemayhem'].userBackup.fullname;\n\t\t\t}\n\t\t\tif (boostBy) {\n\t\t\t\tsuccess = true;\n\t\t\t\tswitch (effect?.id) {\n\t\t\t\tcase 'bellydrum': case 'angerpoint':\n\t\t\t\t\tthis.add('-setboost', target, 'atk', target.boosts['atk'], '[from] ' + effect.fullname);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'bellydrum2':\n\t\t\t\t\tthis.add(msg, target, boostName, boostBy, '[silent]');\n\t\t\t\t\tthis.hint(\"In Gen 2, Belly Drum boosts by 2 when it fails.\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'zpower':\n\t\t\t\t\tthis.add(msg, target, boostName, boostBy, '[zeffect]');\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tif (!effect) break;\n\t\t\t\t\tif (effect.effectType === 'Move') {\n\t\t\t\t\t\tthis.add(msg, target, boostName, boostBy);\n\t\t\t\t\t} else if (effect.effectType === 'Item') {\n\t\t\t\t\t\tthis.add(msg, target, boostName, boostBy, '[from] item: ' + effect.name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (effect.effectType === 'Ability' && !boosted) {\n\t\t\t\t\t\t\tthis.add('-ability', target, effect.name, 'boost');\n\t\t\t\t\t\t\tboosted = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.add(msg, target, boostName, boostBy);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthis.runEvent('AfterEachBoost', target, source, effect, currentBoost);\n\t\t\t} else if (effect?.effectType === 'Ability') {\n\t\t\t\tif (isSecondary || isSelf) this.add(msg, target, boostName, boostBy);\n\t\t\t} else if (!isSecondary && !isSelf) {\n\t\t\t\tthis.add(msg, target, boostName, boostBy);\n\t\t\t}\n\t\t}\n\t\tthis.runEvent('AfterBoost', target, source, effect, boost);\n\t\tif (success) {\n\t\t\tif (Object.values(boost).some(x => x > 0)) target.statsRaisedThisTurn = true;\n\t\t\tif (Object.values(boost).some(x => x < 0)) target.statsLoweredThisTurn = true;\n\t\t}\n\t\treturn success;\n\t},\n\npokemon: {\n\tlostItemForDelibird: null,\n\tsetItem(item: string | Item, source?: Pokemon, effect?: Effect) {\n\t\tif (!this.hp) return false;\n\t\tif (this.itemState.knockedOff) return false;\n\t\tif (typeof item === 'string') item = this.battle.dex.items.get(item);\n\n\t\tconst effectid = this.battle.effect ? this.battle.effect.id : '';\n\t\tconst RESTORATIVE_BERRIES = new Set([\n\t\t\t'leppaberry', 'aguavberry', 'enigmaberry', 'figyberry', 'iapapaberry', 'magoberry', 'sitrusberry', 'wikiberry', 'oranberry',\n\t\t] as ID[]); // manually pasted in const RESTORATIVE_BERRIES because its absence caused a bug\n\t\tif (RESTORATIVE_BERRIES.has('leppaberry' as ID)) {\n\t\t\tconst inflicted = ['trick', 'switcheroo'].includes(effectid);\n\t\t\tconst external = inflicted && source && !source.isAlly(this);\n\t\t\tthis.pendingStaleness = external ? 'external' : 'internal';\n\t\t} else {\n\t\t\tthis.pendingStaleness = undefined;\n\t\t}\n\t\tconst oldItem = this.getItem();\n\t\tconst oldItemState = this.itemState;\n\t\tthis.item = item.id;\n\t\tthis.itemState = {id: item.id, target: this};\n\t\tif (oldItem.exists) this.battle.singleEvent('End', oldItem, oldItemState, this);\n\t\tif (item.id) {\n\t\t\tthis.battle.singleEvent('Start', item, this.itemState, this, source, effect);\n\t\t}\n\t\treturn true;\n\t},\n\tsetAbility(ability: string | Ability, source?: Pokemon | null, isFromFormeChange = false, isTransform = false) {\n\t\tif (!this.hp) return false;\n\t\tif (typeof ability === 'string') ability = this.battle.dex.abilities.get(ability);\n\t\tconst oldAbility = this.ability;\n\t\tif (!isFromFormeChange) {\n\t\t\tif (ability.isPermanent || this.getAbility().isPermanent) return false;\n\t\t}\n\t\tif (!isTransform) {\n\t\t\tconst setAbilityEvent: boolean | null = this.battle.runEvent('SetAbility', this, source, this.battle.effect, ability);\n\t\t\tif (!setAbilityEvent) return setAbilityEvent;\n\t\t}\n\t\tthis.battle.singleEvent('End', this.battle.dex.abilities.get(oldAbility), this.abilityState, this, source);\n\t\tif (this.battle.effect && this.battle.effect.effectType === 'Move' && !isFromFormeChange) {\n\t\t\tthis.battle.add('-endability', this, this.battle.dex.abilities.get(oldAbility), '[from] move: ' +\n\t\t\t\tthis.battle.dex.moves.get(this.battle.effect.id));\n\t\t}\n\t\tthis.ability = ability.id;\n\t\tthis.abilityState = {id: ability.id, target: this};\n\t\tif (ability.id && this.battle.gen > 3 &&\n\t\t\t(!isTransform || oldAbility !== ability.id || this.battle.gen <= 4)) {\n\t\t\tthis.battle.singleEvent('PreStart', ability, this.abilityState, this, source); // only change\n\t\t\tthis.battle.singleEvent('Start', ability, this.abilityState, this, source);\n\t\t}\n\t\tthis.abilityOrder = this.battle.abilityOrder++;\n\t\treturn oldAbility;\n\t},\n\trunEffectiveness(move: ActiveMove) {\n\t\tlet totalTypeMod = 0;\n\t\tfor (const type of this.getTypes()) {\n\t\t\tif (type === 'Fairy' && (move as any).prehistoricrageBoosted) {\n\t\t\t\ttotalTypeMod += 1;\n\t\t\t} else {\n\t\t\t\tlet typeMod = this.battle.dex.getEffectiveness(move, type);\n\t\t\t\ttypeMod = this.battle.singleEvent('Effectiveness', move, null, this, type, move, typeMod);\n\t\t\t\ttotalTypeMod += this.battle.runEvent('Effectiveness', this, type, move, typeMod);\n\t\t\t}\n\t\t}\n\t\treturn totalTypeMod;\n\t},\n\tisGrounded(negateImmunity = false) {\n\t\tif ('gravity' in this.battle.field.pseudoWeather) return true;\n\t\tif ('ingrain' in this.volatiles && this.battle.gen >= 4) return true;\n\t\tif ('smackdown' in this.volatiles) return true;\n\t\tconst item = (this.ignoringItem() ? '' : this.item);\n\t\tif (item === 'ironball') return true;\n\t\t// If a Fire/Flying type uses Burn Up and Roost, it becomes ???/Flying-type, but it's still grounded.\n\t\tif (!negateImmunity && this.hasType('Flying') && !(this.hasType('???') && 'roost' in this.volatiles)) return false;\n\t\tif (this.hasAbility('levitate') && !this.battle.suppressingAbility(this)) return null;\n\t\tif ('magnetrise' in this.volatiles) return false;\n\t\tif ('telekinesis' in this.volatiles) return false;\n\t\tif ('poolfloaties' in this.volatiles) return false;\n\t\tfor (const target of this.battle.getAllActive()) {\n\t\t\tif (target.hasAbility('uplifting')) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\treturn item !== 'airballoon';\n\t},\n\tgetMoveTargets(move: ActiveMove, target: Pokemon): {targets: Pokemon[], pressureTargets: Pokemon[]} {\n\t\tlet targets: Pokemon[] = [];\n\n\t\tswitch (move.target) {\n\t\tcase 'all':\n\t\tcase 'foeSide':\n\t\tcase 'allySide':\n\t\tcase 'allyTeam':\n\t\t\tif (!move.target.startsWith('foe')) {\n\t\t\t\ttargets.push(...this.alliesAndSelf());\n\t\t\t}\n\t\t\tif (!move.target.startsWith('ally')) {\n\t\t\t\ttargets.push(...this.foes(true));\n\t\t\t}\n\t\t\tif (targets.length && !targets.includes(target)) {\n\t\t\t\tthis.battle.retargetLastMove(targets[targets.length - 1]);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'allAdjacent':\n\t\t\ttargets.push(...this.adjacentAllies());\n\t\t\t// falls through\n\t\tcase 'allAdjacentFoes':\n\t\t\ttargets.push(...this.adjacentFoes());\n\t\t\tif (targets.length && !targets.includes(target)) {\n\t\t\t\tthis.battle.retargetLastMove(targets[targets.length - 1]);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'allies':\n\t\t\ttargets = this.alliesAndSelf();\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tconst selectedTarget = target;\n\t\t\tif (!target || (target.fainted && !target.isAlly(this)) && this.battle.gameType !== 'freeforall') {\n\t\t\t\t// If a targeted foe faints, the move is retargeted\n\t\t\t\tconst possibleTarget = this.battle.getRandomTarget(this, move);\n\t\t\t\tif (!possibleTarget) return {targets: [], pressureTargets: []};\n\t\t\t\ttarget = possibleTarget;\n\t\t\t}\n\t\t\tif (this.battle.activePerHalf > 1 && !move.tracksTarget) {\n\t\t\t\tconst isCharging = move.flags['charge'] && !this.volatiles['twoturnmove'] &&\n\t\t\t\t\t!((move.id.startsWith('solarb') || this.hasAbility('solarcore')) && this.battle.field.isWeather(['sunnyday', 'desolateland'])) &&\n\t\t\t\t\t!(this.hasItem('powerherb') && move.id !== 'skydrop');\n\t\t\t\tif (!isCharging) {\n\t\t\t\t\ttarget = this.battle.priorityEvent('RedirectTarget', this, this, move, target);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (move.smartTarget) {\n\t\t\t\ttargets = this.getSmartTargets(target, move);\n\t\t\t\ttarget = targets[0];\n\t\t\t} else {\n\t\t\t\ttargets.push(target);\n\t\t\t}\n\t\t\tif (target.fainted && !move.flags['futuremove']) {\n\t\t\t\treturn {targets: [], pressureTargets: []};\n\t\t\t}\n\t\t\tif (selectedTarget !== target) {\n\t\t\t\tthis.battle.retargetLastMove(target);\n\t\t\t}\n\t\t}\n\n\t\t// Resolve apparent targets for Pressure.\n\t\tlet pressureTargets = targets;\n\t\tif (move.target === 'foeSide') {\n\t\t\tpressureTargets = [];\n\t\t}\n\t\tif (move.flags['mustpressure']) {\n\t\t\tpressureTargets = this.foes();\n\t\t}\n\n\t\treturn {targets, pressureTargets};\n\t},\n\tcureStatus(pokemon: Pokemon, silent = false) {\n\t\tif (!this.hp || !this.status) return false;\n\t\tthis.battle.add('-curestatus', this, this.status, silent ? '[silent]' : '[msg]');\n\t\tif (this.status === 'slp' && this.removeVolatile('nightmare')) {\n\t\t\tthis.battle.add('-end', this, 'Nightmare', '[silent]');\n\t\t}\n\t\tthis.setStatus('');\n\t\tif (this.volatiles['staccato']) {\n\t\t\tthis.volatiles['staccato'].busted = true;\n\t\t\tthis.removeVolatile('staccato');\n\t\t}\n\t\treturn true;\n\t},\n\tignoringItem() { // modded for Hyperspace Mayhem: even if the holder has an item, the summoned Pok\u00E9mon doesn't!\n\t\treturn !!(\n\t\t\tthis.itemState.knockedOff || // Gen 3-4\n\t\t\t(this.battle.gen >= 5 && !this.isActive) ||\n\t\t\t(!this.getItem().ignoreKlutz && this.hasAbility('klutz')) ||\n\t\t\tthis.volatiles['embargo'] || this.volatiles['hyperspacemayhem'] || this.battle.field.pseudoWeather['magicroom']\n\t\t);\n\t},\n\tformeChange( // modified for Hyperspace Mayhem\n\t\tspeciesId: string | Species, source: Effect = this.battle.effect,\n\t\tisPermanent?: boolean, message?: string\n\t) {\n\t\tconst rawSpecies = this.battle.dex.species.get(speciesId);\n\n\t\tconst species = this.setSpecies(rawSpecies, source);\n\t\tif (!species) return false;\n\n\t\tif (this.battle.gen <= 2) return true;\n\n\t\t// The species the opponent sees\n\t\tconst apparentSpecies =\n\t\t\tthis.illusion ? this.illusion.species.name : species.baseSpecies;\n\t\tif (isPermanent || source.id === 'hyperspacehole') {\n\t\t\tif (isPermanent) this.baseSpecies = rawSpecies;\n\t\t\tthis.details = species.name + (this.level === 100 ? '' : ', L' + this.level) +\n\t\t\t\t(this.gender === '' ? '' : ', ' + this.gender) + (this.set.shiny ? ', shiny' : '');\n\t\t\tlet details = (this.illusion || this).details;\n\t\t\tif (this.terastallized) details += `, tera:${this.terastallized}`;\n\t\t\tthis.battle.add('detailschange', this, details);\n\t\t\tif (source.effectType === 'Item') {\n\t\t\t\tthis.canTerastallize = null; // National Dex behavior\n\t\t\t\tif (source.zMove) {\n\t\t\t\t\tthis.battle.add('-burst', this, apparentSpecies, species.requiredItem);\n\t\t\t\t\tthis.moveThisTurnResult = true; // Ultra Burst counts as an action for Truant\n\t\t\t\t} else if (source.onPrimal) {\n\t\t\t\t\tif (this.illusion) {\n\t\t\t\t\t\tthis.ability = '';\n\t\t\t\t\t\tthis.battle.add('-primal', this.illusion, species.requiredItem);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.battle.add('-primal', this, species.requiredItem);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// So a Mega Evolution message isn't sent while we're waiting on Ogerpon text\n\t\t\t\t\tif (source.megaEvolves) {\n\t\t\t\t\t\tthis.battle.add('-mega', this, apparentSpecies, species.requiredItem);\n\t\t\t\t\t}\n\t\t\t\t\tthis.moveThisTurnResult = true; // Mega Evolution counts as an action for Truant\n\t\t\t\t}\n\t\t\t} else if (source.effectType === 'Status') {\n\t\t\t\t// Shaymin-Sky -> Shaymin\n\t\t\t\tthis.battle.add('-formechange', this, species.name, message);\n\t\t\t}\n\t\t} else {\n\t\t\tif (source.effectType === 'Ability') {\n\t\t\t\tthis.battle.add('-formechange', this, species.name, message, `[from] ability: ${source.name}`);\n\t\t\t} else if (source.id === 'hyperspacehole') {\n\t\t\t\tthis.battle.add('-formechange', this, this.illusion ? this.illusion.species.name : species.name, '[silent]');\n\t\t\t} else {\n\t\t\t\tthis.battle.add('-formechange', this, this.illusion ? this.illusion.species.name : species.name, message);\n\t\t\t}\n\t\t}\n\t\tif (isPermanent && !['disguise', 'iceface'].includes(source.id)) {\n\t\t\tif (this.illusion) {\n\t\t\t\tthis.ability = ''; // Don't allow Illusion to wear off\n\t\t\t}\n\t\t\tthis.setAbility(species.abilities['0'], null, true);\n\t\t\tthis.baseAbility = this.ability;\n\t\t}\n\t\tif (source.id === 'hyperspacehole') {\n\t\t\tif (this.volatiles['hyperspacemayhem']) {\n\t\t\t\tthis.setAbility(species.abilities['0'], null, true);\n\t\t\t} else {\n\t\t\t\tthis.setAbility('hyperspacemayhem', null, true);\n\t\t\t}\n\t\t\tif (this.species.forme.startsWith('Mega') || this.species.forme.startsWith('Ultra')) this.battle.add('-start', this, 'typechange', this.getTypes(true).join('/'), '[silent]');\n\t\t}\n\t\tif (this.terastallized) {\n\t\t\tthis.knownType = true;\n\t\t\tthis.apparentType = this.terastallized;\n\t\t}\n\t\treturn true;\n\t}\n},\n\nfield: { // modified for Arena Rock and Down-to-Earth\n\tsetTerrain(status: string | Effect, source: Pokemon | 'debug' | null = null, sourceEffect: Effect | null = null) {\n\t\tstatus = this.battle.dex.conditions.get(status);\n\t\tif (!sourceEffect && this.battle.effect) sourceEffect = this.battle.effect;\n\t\tif (!source && this.battle.event && this.battle.event.target) source = this.battle.event.target;\n\t\tif (source === 'debug') source = this.battle.sides[0].active[0];\n\t\tif (!source) throw new Error(`setting terrain without a source`);\n\n\t\tif (this.terrain === status.id) return false;\n\t\tif (source) { // modded: this whole section added for Arena Rock\n\t\t\tconst result = this.battle.runEvent('SetTerrain', source, source, status);\n\t\t\tif (this.terrain === 'grassyterrain' && this.battle.getAllActive().some(x => x.hasAbility('arenarock') && !x.m.forceCustomBlock)) {\n\t\t\t\tif ((sourceEffect as Move)?.terrain) {\n\t\t\t\t\tthis.battle.add('-fail', source, sourceEffect, '[from] ' + this.terrain);\n\t\t\t\t} else if (sourceEffect && sourceEffect.effectType === 'Ability') {\n\t\t\t\t\tthis.battle.add('-ability', source, sourceEffect, '[from] ' + this.terrain, '[fail]');\n\t\t\t\t}\n\t\t\t\tthis.battle.add('-message', `Nothing can break through this unrelenting plant growth!`);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} // end of modded section\n\t\tconst prevTerrain = this.terrain;\n\t\tconst prevTerrainState = this.terrainState;\n\t\tthis.terrain = status.id;\n\t\tthis.terrainState = {\n\t\t\tid: status.id,\n\t\t\tsource,\n\t\t\tsourceSlot: source.getSlot(),\n\t\t\tduration: status.duration,\n\t\t};\n\t\tif (status.durationCallback) {\n\t\t\tthis.terrainState.duration = status.durationCallback.call(this.battle, source, source, sourceEffect);\n\t\t}\n\t\tif (!this.battle.singleEvent('FieldStart', status, this.terrainState, this, source, sourceEffect)) {\n\t\t\tthis.terrain = prevTerrain;\n\t\t\tthis.terrainState = prevTerrainState;\n\t\t\treturn false;\n\t\t}\n\t\tif (this.battle.getAllActive().some(x => x.hasAbility('downtoearth') && !x.m.forceCustomBlock)) return true; // modded: skip the TerrainChange\n\t\tthis.battle.eachEvent('TerrainChange', sourceEffect);\n\t\treturn true;\n\t},\n\n\tclearTerrain() {\n\t\tif (!this.terrain) return false;\n\t\tif (this.isTerrain('grassyterrain') && this.battle.getAllActive().some(x => x.hasAbility('arenarock') && !x.m.forceCustomBlock)) return false; // modded for Arena Rock\n\t\tconst prevTerrain = this.getTerrain();\n\t\tthis.battle.singleEvent('FieldEnd', prevTerrain, this.terrainState, this);\n\t\tthis.terrain = '';\n\t\tthis.terrainState = {id: ''};\n\t\tthis.battle.eachEvent('TerrainChange');\n\t\treturn true;\n\t},\n\n\tisTerrain(terrain: string | string[], target?: Pokemon | Side | Battle) {\n\t\tif (this.battle.getAllActive().some(x => x.hasAbility('downtoearth') && !x.m.forceCustomBlock)) return false; // modded\n\t\tconst ourTerrain = this.effectiveTerrain(target);\n\t\tif (!Array.isArray(terrain)) {\n\t\t\treturn ourTerrain === toID(terrain);\n\t\t}\n\t\treturn terrain.map(toID).includes(ourTerrain);\n\t},\n},\n\n};\n"],
  "mappings": "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",
  "names": ["basePower"]
}
