{
  "version": 3,
  "sources": ["../../../../data/mods/randomtandem/scripts.ts"],
  "sourcesContent": ["import {Dex} from '../../../sim/dex';\nexport const Scripts: {[k: string]: ModdedBattleScriptsData} = {\n\tgen: 9,\n\tside: {\n\t\tinherit: true,\n\t\tpickedTeamSize() {\n\t\t\treturn 6;\n\t\t},\n\t\tchooseTeam(data = '') {\n\t\t\tif (this.requestState !== 'teampreview') {\n\t\t\t\treturn this.emitChoiceError(`Can't choose for Team Preview: You're not in a Team Preview phase`);\n\t\t\t}\n\n\t\t\tconst ruleTable = this.battle.ruleTable;\n\t\t\tlet positions = data.split(data.includes(',') ? ',' : '')\n\t\t\t\t.map(datum => parseInt(datum) - 1);\n\t\t\tconst pickedTeamSize = 6;\n\n\t\t\t// make sure positions is exactly of length pickedTeamSize\n\t\t\t// - If too big: the client automatically sends a full list, so we just trim it down to size\n\t\t\tpositions.splice(pickedTeamSize);\n\t\t\t// - If too small: we intentionally support only sending leads and having the sim fill in the rest\n\t\t\tif (positions.length === 0) {\n\t\t\t\tfor (let i = 0; i < pickedTeamSize; i++) positions.push(i);\n\t\t\t} else if (positions.length < pickedTeamSize) {\n\t\t\t\tfor (let i = 0; i < pickedTeamSize; i++) {\n\t\t\t\t\tif (!positions.includes(i)) positions.push(i);\n\t\t\t\t\t// duplicate in input, let the rest of the code handle the error message\n\t\t\t\t\tif (positions.length >= pickedTeamSize) break;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const [index, pos] of positions.entries()) {\n\t\t\t\tif (isNaN(pos) || pos < 0 || pos >= this.pokemon.length) {\n\t\t\t\t\treturn this.emitChoiceError(`Can't choose for Team Preview: You do not have a Pok\u00E9mon in slot ${pos + 1}`);\n\t\t\t\t}\n\t\t\t\tif (positions.indexOf(pos) !== index) {\n\t\t\t\t\treturn this.emitChoiceError(`Can't choose for Team Preview: The Pok\u00E9mon in slot ${pos + 1} can only switch in once`);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (ruleTable.maxTotalLevel) {\n\t\t\t\tlet totalLevel = 0;\n\t\t\t\tfor (const pos of positions) totalLevel += this.pokemon[pos].level;\n\n\t\t\t\tif (totalLevel > ruleTable.maxTotalLevel) {\n\t\t\t\t\tif (!data) {\n\t\t\t\t\t\t// autoChoose\n\t\t\t\t\t\tpositions = [...this.pokemon.keys()].sort((a, b) => (this.pokemon[a].level - this.pokemon[b].level))\n\t\t\t\t\t\t\t.slice(0, pickedTeamSize);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn this.emitChoiceError(`Your selected team has a total level of ${totalLevel}, but it can't be above ${ruleTable.maxTotalLevel}; please select a valid team of ${pickedTeamSize} Pok\u00E9mon`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (ruleTable.valueRules.has('forceselect')) {\n\t\t\t\tconst species = this.battle.dex.species.get(ruleTable.valueRules.get('forceselect'));\n\t\t\t\tif (!data) {\n\t\t\t\t\t// autoChoose\n\t\t\t\t\tpositions = [...this.pokemon.keys()].filter(pos => this.pokemon[pos].species.name === species.name)\n\t\t\t\t\t\t.concat([...this.pokemon.keys()].filter(pos => this.pokemon[pos].species.name !== species.name))\n\t\t\t\t\t\t.slice(0, pickedTeamSize);\n\t\t\t\t} else {\n\t\t\t\t\tlet hasSelection = false;\n\t\t\t\t\tfor (const pos of positions) {\n\t\t\t\t\t\tif (this.pokemon[pos].species.name === species.name) {\n\t\t\t\t\t\t\thasSelection = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!hasSelection) {\n\t\t\t\t\t\treturn this.emitChoiceError(`You must bring ${species.name} to the battle.`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const [index, pos] of positions.entries()) {\n\t\t\t\tthis.choice.switchIns.add(pos);\n\t\t\t\tthis.choice.actions.push({\n\t\t\t\t\tchoice: 'team',\n\t\t\t\t\tindex,\n\t\t\t\t\tpokemon: this.pokemon[pos],\n\t\t\t\t\tpriority: -index,\n\t\t\t\t} as ChosenAction);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t},\n};"],
  "mappings": "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",
  "names": []
}
