{
  "version": 3,
  "sources": ["../../../../data/mods/jollymod/conditions.ts"],
  "sourcesContent": ["import {FS} from '../../../lib';\nimport {toID} from '../../../sim/dex-data';\nimport {Pokemon} from \"../../../sim/pokemon\";\n\n// Similar to User.usergroups. Cannot import here due to users.ts requiring Chat\n// This also acts as a cache, meaning ranks will only update when a hotpatch/restart occurs\nconst usergroups: {[userid: string]: string} = {};\nconst usergroupData = FS('config/usergroups.csv').readIfExistsSync().split('\\n');\nfor (const row of usergroupData) {\n\tif (!toID(row)) continue;\n\n\tconst cells = row.split(',');\n\tif (cells.length > 3) throw new Error(`Invalid entry when parsing usergroups.csv`);\n\tusergroups[toID(cells[0])] = cells[1].trim() || ' ';\n}\n\nexport function getName(name: string): string {\n\tconst userid = toID(name);\n\tif (!userid) throw new Error('No/Invalid name passed to getSymbol');\n\n\tconst group = usergroups[userid] || ' ';\n\treturn group + name;\n}\n\nexport const Conditions: {[id: string]: ModdedConditionData} = {\n\tsnow: {\n\t\tname: 'Snow',\n\t\teffectType: 'Weather',\n\t\tduration: 0,\n\t\tonFieldStart(field, source, effect) {\n\t\t\tthis.add('-weather', 'Snow');\n\t\t\tthis.effectState.cooldown = 5;\n\t\t},\n\t\tonFieldResidualOrder: 1,\n\t\tonFieldResidual() {\n\t\t\tthis.add('-weather', 'Snow', '[upkeep]');\n\t\t\tif (this.field.isWeather('snow')) this.eachEvent('Weather');\n\t\t\t\n\t\t\tlet probability = 4;\n\t\t\tif (this.field.pseudoWeather.milkandcookies) probability = 2;\n\t\t\tif (this.effectState.cooldown === 0 && this.randomChance(1, probability)) {\n\t\t\t\tthis.add('-message', 'Santa came to visit!');\n\t\t\t\tconst side1 = this.sides[0];\n\t\t\t\tconst side2 = this.sides[1];\n\t\t\t\t\n\t\t\t\tif (side1.karma > side2.karma) {\n\t\t\t\t\tside1.reward();\n\t\t\t\t\tside2.punish();\n\t\t\t\t} else if (side2.karma > side1.karma){\n\t\t\t\t\tside2.reward();\n\t\t\t\t\tside1.punish();\n\t\t\t\t} else {\n\t\t\t\t\tthis.add('-message', 'Both sides have the same karma, so Santa left.');\n\t\t\t\t}\n\t\t\t\tthis.effectState.cooldown = 5;\n\t\t\t} else if (this.effectState.cooldown !== 0) this.effectState.cooldown --;\n\t\t},\n\t},\n\tfsb: {\n\t\tname: 'fsb',\n\t\tstart: \"  [Pokemon] was chilled!\",\n\t\talreadyStarted: \"  [POKEMON] is already chilled!\",\n\t\tend: \"  [POKEMON] warmed up!\",\n\t\tendFromItem: \"  [POKEMON]'s [ITEM] warmed it up!\",\n\t\tendFromMove: \"  [POKEMON]'s [MOVE] warmed it up!\",\n\t\tcant: \"[POKEMON] is chilled!\",\n\t\teffectType: 'Status',\n\t\tonStart(target, source, sourceEffect) {\n\t\t\tthis.add('-start', target, 'Frostbite', '[silent]');\n\t\t\tthis.add('-message', `${target.name} was frostbitten!`);\n\t\t},\n\t\tonResidualOrder: 9,\n\t\tonResidual(pokemon) {\n\t\t\tthis.damage(pokemon.baseMaxhp / 16);\n\t\t},\n\t\tonModifySpA(spa, pokemon) {\n\t\t\treturn this.chainModify(0.5);\n\t\t},\n\t},\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB;AACjB,sBAAmB;AAKnB,MAAM,aAAyC,CAAC;AAChD,MAAM,oBAAgB,eAAG,uBAAuB,EAAE,iBAAiB,EAAE,MAAM,IAAI;AAC/E,WAAW,OAAO,eAAe;AAChC,MAAI,KAAC,sBAAK,GAAG;AAAG;AAEhB,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,MAAI,MAAM,SAAS;AAAG,UAAM,IAAI,MAAM,2CAA2C;AACjF,iBAAW,sBAAK,MAAM,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,EAAE,KAAK,KAAK;AACjD;AAEO,SAAS,QAAQ,MAAsB;AAC7C,QAAM,aAAS,sBAAK,IAAI;AACxB,MAAI,CAAC;AAAQ,UAAM,IAAI,MAAM,qCAAqC;AAElE,QAAM,QAAQ,WAAW,MAAM,KAAK;AACpC,SAAO,QAAQ;AAChB;AAEO,MAAM,aAAkD;AAAA,EAC9D,MAAM;AAAA,IACL,MAAM;AAAA,IACN,YAAY;AAAA,IACZ,UAAU;AAAA,IACV,aAAa,OAAO,QAAQ,QAAQ;AACnC,WAAK,IAAI,YAAY,MAAM;AAC3B,WAAK,YAAY,WAAW;AAAA,IAC7B;AAAA,IACA,sBAAsB;AAAA,IACtB,kBAAkB;AACjB,WAAK,IAAI,YAAY,QAAQ,UAAU;AACvC,UAAI,KAAK,MAAM,UAAU,MAAM;AAAG,aAAK,UAAU,SAAS;AAE1D,UAAI,cAAc;AAClB,UAAI,KAAK,MAAM,cAAc;AAAgB,sBAAc;AAC3D,UAAI,KAAK,YAAY,aAAa,KAAK,KAAK,aAAa,GAAG,WAAW,GAAG;AACzE,aAAK,IAAI,YAAY,sBAAsB;AAC3C,cAAM,QAAQ,KAAK,MAAM,CAAC;AAC1B,cAAM,QAAQ,KAAK,MAAM,CAAC;AAE1B,YAAI,MAAM,QAAQ,MAAM,OAAO;AAC9B,gBAAM,OAAO;AACb,gBAAM,OAAO;AAAA,QACd,WAAW,MAAM,QAAQ,MAAM,OAAM;AACpC,gBAAM,OAAO;AACb,gBAAM,OAAO;AAAA,QACd,OAAO;AACN,eAAK,IAAI,YAAY,gDAAgD;AAAA,QACtE;AACA,aAAK,YAAY,WAAW;AAAA,MAC7B,WAAW,KAAK,YAAY,aAAa;AAAG,aAAK,YAAY;AAAA,IAC9D;AAAA,EACD;AAAA,EACA,KAAK;AAAA,IACJ,MAAM;AAAA,IACN,OAAO;AAAA,IACP,gBAAgB;AAAA,IAChB,KAAK;AAAA,IACL,aAAa;AAAA,IACb,aAAa;AAAA,IACb,MAAM;AAAA,IACN,YAAY;AAAA,IACZ,QAAQ,QAAQ,QAAQ,cAAc;AACrC,WAAK,IAAI,UAAU,QAAQ,aAAa,UAAU;AAClD,WAAK,IAAI,YAAY,GAAG,OAAO,uBAAuB;AAAA,IACvD;AAAA,IACA,iBAAiB;AAAA,IACjB,WAAW,SAAS;AACnB,WAAK,OAAO,QAAQ,YAAY,EAAE;AAAA,IACnC;AAAA,IACA,YAAY,KAAK,SAAS;AACzB,aAAO,KAAK,YAAY,GAAG;AAAA,IAC5B;AAAA,EACD;AACD;",
  "names": []
}
