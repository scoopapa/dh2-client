{
  "version": 3,
  "sources": ["../../../../data/mods/m4apaldea/conditions.ts"],
  "sourcesContent": ["export const Conditions: {[k: string]: ConditionData} = {\n\tcongestionstatus: {\n\t\t\t// When the slot condition is applied\n\t\t\tonStart(target) {\n\t\t\t\tthis.effectState.congestionQueue = [] as {\n\t\t\t\t\tmove: Move,\n\t\t\t\t\tsourceSlot: number,\n\t\t\t\t\tside: Side,\n\t\t\t\t}[];\n\t\t\t},\n\t\t\n\t\t\t// Intercept and delay all status moves\n\t\t\tonBeforeMove(pokemon, target, move) {\n\t\t\t\tif (move.category !== 'Status') return;\n\t\t\n\t\t\t\tconst slot = pokemon.position;\n\t\t\t\tconst side = pokemon.side;\n\t\t\t\tconst slotCon = side.slotConditions[slot];\n\t\t\n\t\t\t\tif (!slotCon.congestionQueue) {\n\t\t\t\t\tslotCon.congestionQueue = [];\n\t\t\t\t}\n\t\t\n\t\t\t\tslotCon.congestionQueue.push({\n\t\t\t\t\tmove: this.dex.moves.get(move.id),\n\t\t\t\t\tsourceSlot: slot,\n\t\t\t\t\tside,\n\t\t\t\t});\n\t\t\n\t\t\t\t// Reduce PP immediately\n\t\t\t\tconst moveSlot = pokemon.moveSlots.find(m => m.id === move.id);\n\t\t\t\tif (moveSlot) moveSlot.pp = Math.max(0, moveSlot.pp - 1);\n\t\t\n\t\t\t\tthis.add('-message', `${pokemon.name}'s ${move.name} was delayed due to Congestion!`);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\n\t\t\t// Check whether to resolve delayed moves\n\t\t\tonUpdate(pokemon) {\n\t\t\t\t// If any Congestion user remains on the field, wait\n\t\t\t\tconst congestionStillActive = this.getAllActive().some(p =>\n\t\t\t\t\tp.getAbility().id === 'congestion' && !p.fainted\n\t\t\t\t);\n\t\t\t\tif (congestionStillActive) return;\n\t\t\n\t\t\t\tconst slot = pokemon.position;\n\t\t\t\tconst side = pokemon.side;\n\t\t\t\tconst slotCon = side.slotConditions[slot];\n\t\t\n\t\t\t\tif (!slotCon?.congestionQueue?.length) return;\n\t\t\n\t\t\t\tthis.add('-message', `${pokemon.name}'s slot resolves delayed status moves!`);\n\t\t\n\t\t\t\tfor (const { move, sourceSlot, side: moveSide } of slotCon.congestionQueue as {\n\t\t\t\t\tmove: Move,\n\t\t\t\t\tsourceSlot: number,\n\t\t\t\t\tside: Side,\n\t\t\t\t}[]) {\n\t\t\t\t\tconst source = moveSide.active[sourceSlot];\n\t\t\t\t\tif (!source || source.fainted) continue;\n\t\t\n\t\t\t\t\tconst activeMove = this.dex.getActiveMove(move.id);\n\t\t\t\t\tconst moveTargetType = activeMove.target ?? 'normal';\n\t\t\n\t\t\t\t\tconst targets = this.getAllActive().filter(t => {\n\t\t\t\t\t\tif (!t || t.fainted) return false;\n\t\t\n\t\t\t\t\t\tswitch (moveTargetType) {\n\t\t\t\t\t\t\tcase 'self': return t === source;\n\t\t\t\t\t\t\tcase 'adjacentAlly': return t !== source && t.side === source.side && source.isAdjacent(t);\n\t\t\t\t\t\t\tcase 'adjacentAllyOrSelf': return t.side === source.side && source.isAdjacent(t);\n\t\t\t\t\t\t\tcase 'allySide': return t === source;\n\t\t\t\t\t\t\tcase 'foeSide': return t.side !== source.side;\n\t\t\t\t\t\t\tcase 'allAdjacentFoes': return t.side !== source.side && source.isAdjacent(t);\n\t\t\t\t\t\t\tcase 'allAdjacent': return source.isAdjacent(t);\n\t\t\t\t\t\t\tcase 'allyTeam': return t.side === source.side;\n\t\t\t\t\t\t\tcase 'all': return true;\n\t\t\t\t\t\t\tcase 'normal': return t !== source && t.side !== source.side;\n\t\t\t\t\t\t\tdefault: return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\n\t\t\t\t\tfor (const target of targets) {\n\t\t\t\t\t\tif (activeMove.status) target.trySetStatus(activeMove.status, source, activeMove);\n\t\t\t\t\t\tif (activeMove.volatileStatus) target.addVolatile(activeMove.volatileStatus, source, activeMove);\n\t\t\t\t\t\tif (activeMove.boosts) this.boost(activeMove.boosts, target, source, activeMove);\n\t\t\t\t\t\tif (activeMove.heal) {\n\t\t\t\t\t\t// Extract numerator and denominator for healing fraction (e.g., Recover heals 50% of max HP)\n\t\t\t\t\t\t\tconst [numerator, denominator] = activeMove.heal;\n\t\t\t\t\t\t\t// Calculate the healing amount based on target's max HP\n\t\t\t\t\t\t\tconst healAmount = Math.floor(target.maxhp * (numerator / denominator));\n\t\t\t\t\t\t\t// Apply the healing effect to the target\n\t\t\t\t\t\t\tthis.heal(healAmount, target, source, activeMove);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof activeMove.onHit === 'function') {\n\t\t\t\t\t\t\tactiveMove.onHit.call(this, target, source, activeMove);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\t// Apply any side/field conditions\n\t\t\t\t\tif (activeMove.sideCondition) {\n\t\t\t\t\t\tsource.side.addSideCondition(activeMove.sideCondition, source, activeMove);\n\t\t\t\t\t}\n\t\t\t\t\tif (activeMove.pseudoWeather) {\n\t\t\t\t\t\tthis.field.addPseudoWeather(activeMove.pseudoWeather, source, activeMove);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\n\t\t\t\t// Clean up after applying moves\n\t\t\t\tslotCon.congestionQueue = [];\n\t\t\t\tside.removeSlotCondition(pokemon, 'congestionstatus');\n\t\t\t},\n\t\t},\n\tendlessdream: { \n\t\tname: \"Endless Dream\",\n\t\teffectType: 'PseudoWeather',\n\t\tduration: 0,\n\t\tonFieldStart(field, source, effect) {\n\t\t\tthis.add('-pseudoweather', 'EndlessDream', '[of] ' + source);\n\t\t},\n\t\tonSetStatus(status, target, source, effect) {\n\t\t\tif (target.hasAbility('vitalspirit') || target.hasAbility('insomnia')) return;\n\t\t\tif ((effect as Move)?.status || effect?.id === 'yawn') {\n\t\t\t\tthis.add('-fail', target, '[from] Endless Dream');\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tonResidualOrder: 23,\n\t\tonEnd() {\n\t\t\tthis.add('-fieldend', 'none');\n\t\t},\n\t},\n};\n"],
  "mappings": "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",
  "names": []
}
