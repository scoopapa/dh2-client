{
  "version": 3,
  "sources": ["../../../../data/mods/doubletrouble/abilities.ts"],
  "sourcesContent": ["export const Abilities: { [abilityid: string]: ModdedAbilityData } = {\n\tfocusinglens: {\n\t\t// TODO\n\t\tname: \"Focusing Lens\",\n\t\tshortDesc: \"Placeholder\",\n\t},\n\tchromatophores: {\n\t\t// TODO\n\t\tname: \"Chromatophores\",\n\t\tonPrepareHit(source, target, move) {\n\t\t\tif (move.category !== 'Status') return;\n\t\t\tconst type = move.type;\n\t\t\tif (type && type !== '???' && source.getTypes().join() !== type) {\n\t\t\t\tif (!source.addType(type)) return;\n\t\t\t\tthis.add('-start', source, 'typechange', type, '[from] ability: Chromatophores');\n\t\t\t}\n\t\t},\n\t\tshortDesc: \"changes secondary type to status move used.\",\n\t},\n\tguidedassault: {\n\t\t// TODO\n\t\tname: \"Guided Assault\",\n\t\tshortDesc: \"Placeholder\",\n\t},\n\tripplingsurface: {\n\t\t// TODO\n\t\tname: \"Rippling Surface\",\n\t\tshortDesc: \"Placeholder\",\n\t},\n\tdreamcatcher: {\n\t\t// TODO\n\t\tname: \"Dream Catcher\",\n\t\tshortDesc: \"Placeholder\",\n\t},\n\tarchetype: {\n\t\t// From VGC 20XX\n\t\tshortDesc: \"Gains opposite effect of target's lowered stat.\",\n\t\tonPrepareHit(source, target, move) {\n\t\t\tif (move && move.target === 'allAdjacentFoes') {\n\t\t\t\tfor (const foe of source.foes()) {\n\t\t\t\t\tif (foe.isAdjacent(source)) {\n\t\t\t\t\t\tconst boosts = { ...foe.boosts };\n\t\t\t\t\t\tfoe.addVolatile('archetype', source);\n\t\t\t\t\t\tfoe.volatiles['archetype'].boosts = boosts;\n\t\t\t\t\t//\tthis.add('-start', foe, 'Archetype', '[from] ability: Archetype');\n\t\t\t\t\t//\tthis.add('-message', `${foe.name}'s boosts were copied: ${JSON.stringify(boosts)}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (move && move.target === 'allAdjacent') {\n\t\t\t\tfor (const adjacent of this.getAllActive()) {\n\t\t\t\t\tif (adjacent !== source && adjacent.isAdjacent(source)) {\n\t\t\t\t\t\tconst boosts = { ...adjacent.boosts };\n\t\t\t\t\t\tadjacent.addVolatile('archetype', source);\n\t\t\t\t\t\tadjacent.volatiles['archetype'].boosts = boosts;\n\t\t\t\t\t//\tthis.add('-start', adjacent, 'Archetype', '[from] ability: Archetype');\n\t\t\t\t\t//\tthis.add('-message', `${adjacent.name}'s boosts were copied: ${JSON.stringify(boosts)}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (move && move.target === 'normal') {\n\t\t\t\tconst boosts = { ...target.boosts };\n\t\t\t\ttarget.addVolatile('archetype', source);\n\t\t\t\ttarget.volatiles['archetype'].boosts = boosts;\n\t\t\t//\tthis.add('-start', target, 'Archetype', '[from] ability: Archetype');\n\t\t\t//\tthis.add('-message', `${target.name}'s boosts were copied: ${JSON.stringify(boosts)}`);\n\t\t\t}\n\t\t},\n\t\tonAfterMove(source, target, move) {\n\t\t\tif (target === source) return; // originally had \"target.fainted\" but its inclusion might be unnecessary, especially in VGC where if one ally faints, the other becomes unaffected by ability\n\t\n\t\t\tconst stats = ['atk', 'def', 'spa', 'spd', 'spe', 'accuracy', 'evasion'] as const;\n\t\t\ttype BoostStatistics = typeof stats[number];\n\t\t\tconst boostGains: Partial<Record<BoostStatistics, number>> = {};\n\t\n\t\t\tfor (const activeTarget of this.getAllActive()) {\n\t\t\t\tif (!activeTarget.volatiles['archetype']) continue;\n\t\n\t\t\t\tconst storedBoosts = activeTarget.volatiles['archetype'].boosts;\n\t\t\t\tconst currentBoosts = activeTarget.boosts;\n\t\n\t\t\t\tfor (const stat of stats) {\n\t\t\t\t\tif (currentBoosts[stat] < storedBoosts[stat] || \n\t\t\t\t\t\t(currentBoosts[stat] < 0 && currentBoosts[stat] < storedBoosts[stat])) {\n\t\t\t\t\t\tconst difference = storedBoosts[stat] - currentBoosts[stat];\n\t\t\t\t\t\tboostGains[stat] = (boostGains[stat] || 0) + difference;\n\t\n\t\t\t\t\t//\tthis.add('-message', `${source.name} gains ${difference} ${stat} boost from ${activeTarget.name}'s lower boost.`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tdelete activeTarget.volatiles['archetype'];\n\t\t\t//\tthis.add('-end', activeTarget, 'Archetype', '[from] ability: Archetype');\n\t\t\t}\n\t\n\t\t\t// Apply all boost gains at once and trigger visual display\n\t\t\tif (Object.keys(boostGains).length > 0) {\n\t\t\t\tthis.boost(boostGains, source, source, this.effect);\n\t\t\t}\n\t\t},\t\n\t\tflags: {},\n\t\tname: \"Archetype\",\n\t},\n\tancientcore: {\n\t\t// from VGC 20XX\n\t\tshortDesc: \"Old gen phys/spec split; +20% power.\",\n\t\tonModifyMovePriority: -1,\n\t\tonModifyMove(move) {\n\t\tif (move.category !== 'Status') {\n\t\t\tconst originalCategory = move.category; // New line\n\t\t\tswitch (move.type) {\n\t\t\t\tcase 'Grass':\n\t\t\t\tcase 'Fire':\n\t\t\t\tcase 'Water':\n\t\t\t\tcase 'Ice':\n\t\t\t\tcase 'Electric':\n\t\t\t\tcase 'Psychic':\n\t\t\t\tcase 'Dragon':\n\t\t\t\tcase 'Dark':\n\t\t\t\t\tmove.category = 'Special';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Bug':\n\t\t\t\tcase 'Ghost':\n\t\t\t\tcase 'Poison':\n\t\t\t\tcase 'Ground':\n\t\t\t\tcase 'Rock':\n\t\t\t\tcase 'Fighting':\n\t\t\t\tcase 'Normal':\n\t\t\t\tcase 'Flying':\n\t\t\t\tcase 'Steel':\n\t\t\t\tcase 'Fairy':\n\t\t\t\t\tmove.category = 'Physical';\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// Apply 20% boost only if the category has changed\n\t\t\tif (move.category !== originalCategory) {\n\t\t\t\tmove.basePower = Math.floor(move.basePower * 1.2);\n\t\t\t\tthis.add('-message', `Ancient Core boosted ${move.name}'s power!`);\n\t\t\t}\n\t\t}\n\t\t},\n\t\tname: \"Ancient Core\",\n\t},\n\tentanglingroots: {\n\t\t// TODO\n\t\tname: \"Entangling Roots\",\n\t\tshortDesc: \"Placeholder\",\n\t},\n\toverpoweringmelody: {\n\t\t// TODO\n\t\tname: \"Overpowering Melody\",\n\t\tonModifyMove(move) {\n\t\t\tif (move.flags['sound']) {\n\t\t\t\tif (!move.secondaries) move.secondaries = [];\n\t\t\t\tmove.secondaries.push({\n\t\t\t\t\tchance: 100,\n\t\t\t\t\tvolatileStatus: 'throatchop',\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tshortDesc: \"User's sound moves inflict Throat Chop status.\",\n\t},\n\ttoxicaura: {\n\t\t// TODO\n\t\tname: \"Toxic Aura\",\n\t\tshortDesc: \"Placeholder\",\n\t},\n\t\n};\n"],
  "mappings": "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",
  "names": []
}
