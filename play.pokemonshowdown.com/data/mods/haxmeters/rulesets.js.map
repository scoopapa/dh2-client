{
  "version": 3,
  "sources": ["../../../../data/mods/haxmeters/rulesets.ts"],
  "sourcesContent": ["export function roundNum(n: number, places: number): number {\n\treturn Math.round((n + Number.EPSILON) * Math.pow(10, places)) / Math.pow(10, places);\n}\n\nexport const Rulesets: {[k: string]: ModdedFormatData} = {\n\thaxmeterrule: {\n        effectType: 'Rule',\n        name: 'Hax Meter Rule',\n        desc: \"Implements the Hax Meter\",\n\t\tonBegin() {\n\t\t\tfor (const side of this.sides) {\n\t\t\t\tside.miss = 30;\n\t\t\t\tside.effect = 30;\n\t\t\t\tside.crit = 30;\n\t\t\t\tside.status = 30;\n\t\t\t\t\n\t\t\t\tside.pmiss = 30;\n\t\t\t\tside.peffect = 30;\n\t\t\t\tside.pcrit = 30;\n\t\t\t\tside.pstatus = 30;\n\t\t\t\tfor (const pokemon of side.pokemon) {\n\t\t\t\t\tpokemon.statuses = [];\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst sideOne = this.sides[0];\n\t\t\tconst sideTwo = this.sides[1];\n\t\t\tthis.add(`c:|${Math.floor(Date.now() / 1000)}||\\/raw <div class=\"infobox\"><details class=\"readmore code\"><summary> <div class=\"summary-content-wrapper\"><table class=\"summary-table\"><thead><tr><th colspan=\"2\">${sideOne.name}</th><td>|</td><th colspan=\"2\">${sideTwo.name}</th></tr></thead><tbody><br><tr><td>Miss:</td><td>${roundNum(sideOne.miss, 2)}</td><td>|</td><td>Miss:</td><td>${roundNum(sideTwo.miss, 2)}</td></tr><<td>Effect:</td><td>${roundNum(sideOne.effect, 2)}</td><td>|</td><td>Effect:</td><td>${roundNum(sideTwo.effect, 2)}</td></tr><tr><td>Critical Hit:</td><td>${roundNum(sideOne.crit, 2)}</td><td>|</td><td>Critical Hit:</td><td>${roundNum(sideTwo.crit, 2)}</td></tr><<td>Status:</td><td>${roundNum(sideOne.status, 2)}</td><td>|</td><td>Status:</td><td>${roundNum(sideTwo.status, 2)}</td></tr></tbody></table></div></summary>`);\n\t\t},\n\t\tonResidual(pokemon) {\n\t\t\tconst sideOne = this.sides[0];\n\t\t\tconst sideTwo = this.sides[1];\n\t\t\tif (pokemon.hp && pokemon.side !== sideOne) return;\n\t\t\t//if (sideOne.noChange && sideTwo.noChange) return;\n\t\t\tthis.add(`c:|${Math.floor(Date.now() / 1000)}||\\/raw <div class=\"infobox\"><details class=\"readmore code\"><summary> <div class=\"summary-content-wrapper\"><table class=\"summary-table\"><thead><tr><th colspan=\"2\">${sideOne.name}</th><td>|</td><th colspan=\"2\">${sideTwo.name}</th></tr></thead><tbody><br><tr><td>Miss:</td><td>${roundNum(sideOne.miss, 2)}</td><td>|</td><td>Miss:</td><td>${roundNum(sideTwo.miss, 2)}</td></tr><<td>Effect:</td><td>${roundNum(sideOne.effect, 2)}</td><td>|</td><td>Effect:</td><td>${roundNum(sideTwo.effect, 2)}</td></tr><tr><td>Critical Hit:</td><td>${roundNum(sideOne.crit, 2)}</td><td>|</td><td>Critical Hit:</td><td>${roundNum(sideTwo.crit, 2)}</td></tr><<td>Status:</td><td>${roundNum(sideOne.status, 2)}</td><td>|</td><td>Status:</td><td>${roundNum(sideTwo.status, 2)}</td></tr></tbody></table></div></summary>`);\n\t\t\tfor (const side of this.sides) {\n\t\t\t\tside.pmiss = side.miss;\n\t\t\t\tside.peffect = side.effect;\n\t\t\t\tside.pcrit = side.crit;\n\t\t\t\tside.pstatus = side.status;\n\t\t\t}\n\t\t},\n\t\tonUpdate(pokemon) {\n\t\t\tpokemon.statuses = [];\n\t\t\tif (pokemon.status === 'frz') pokemon.statuses.push('Freeze');\n\t\t\tif (pokemon.volatiles['confusion']) pokemon.statuses.push('Confusion');\n\t\t\tif (pokemon.volatiles['attract']) pokemon.statuses.push('Infatuation');\n\t\t\tif (pokemon.status === 'par') pokemon.statuses.push('Paralysis');\n\t\t},\n\t\tonBeforeMove(pokemon, target, move) {\n\t\t\tif (!pokemon.statuses || pokemon.statuses.length === 0) return;\n\t\t\tlet multiplier = 1;\n\t\t\tlet clauses = 0;\n\t\t\tlet prefix = \"\";\n\t\t\tlet suffix = \"\";\n\t\t\tfor (const status of pokemon.statuses) {\n\t\t\t\tlet toAdd = 0;\n\t\t\t\tswitch(status) {\n\t\t\t\t\tcase 'Paralysis':\n\t\t\t\t\t\ttoAdd = 25;\n\t\t\t\t\t\tclauses ++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Freeze':\n\t\t\t\t\t\tif (move.flags['defrost']) break;\n\t\t\t\t\t\ttoAdd = 80;\n\t\t\t\t\t\tclauses ++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Confusion':\n\t\t\t\t\t\tif (pokemon.volatiles['confusion']) {\n\t\t\t\t\t\t\tthis.add('-activate', pokemon, 'confusion');\n\t\t\t\t\t\t\ttoAdd = 33;\n\t\t\t\t\t\t\tclauses ++;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else continue;\n\t\t\t\t\tcase 'Infatuation':\n\t\t\t\t\t\tthis.add('-activate', pokemon, 'move: Attract', '[of] ' + target);\n\t\t\t\t\t\ttoAdd = 50;\n\t\t\t\t\t\tclauses ++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlet product = toAdd * multiplier;\n\t\t\t\tif (prefix.length === 0) {\n\t\t\t\t\tprefix = status;\n\t\t\t\t\tsuffix = toAdd;\n\t\t\t\t} else suffix = roundNum(multiplier, 3) + ' * ' + roundNum(toAdd, 3) + ' = ' + roundNum(product, 3);\n\t\t\t\tif (toAdd > 0) {\n\t\t\t\t\tif (clauses === 1) this.add('-message', `(${status}: ${suffix})`);\n\t\t\t\t\telse this.add('-message', `(No ${prefix} + ${status}: ${suffix})`);\n\t\t\t\t}\n\t\t\t\tpokemon.side.addStatus(product);\n\t\t\t\tmultiplier *= (1 - (toAdd / 100));\n\t\t\t\tif (prefix.length !== 0 && prefix !== status) {\n\t\t\t\t\tprefix += (' + No ' + status);\n\t\t\t\t}\n\t\t\t\tif (pokemon.side.status >= 100) {\n\t\t\t\t\tpokemon.side.subtractStatus(100);\n\t\t\t\t\tswitch(status) {\n\t\t\t\t\t\tcase 'Paralysis':\n\t\t\t\t\t\t\tthis.add('cant', pokemon, 'par');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Freeze':\n\t\t\t\t\t\t\tthis.add('cant', pokemon, 'frz');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Confusion':\n\t\t\t\t\t\t\tthis.activeTarget = pokemon;\n\t\t\t\t\t\t\tconst damage = this.actions.getConfusionDamage(pokemon, 40);\n\t\t\t\t\t\t\tif (typeof damage !== 'number') throw new Error(\"Confusion damage not dealt\");\n\t\t\t\t\t\t\tconst activeMove = { id: this.toID('confused'), effectType: 'Move', type: '???' };\n\t\t\t\t\t\t\tthis.damage(damage, pokemon, pokemon, activeMove as ActiveMove);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Infatuation':\n\t\t\t\t\t\t\tthis.add('cant', pokemon, 'Attract');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t} else if (pokemon.status === 'frz') pokemon.cureStatus();\n\t\t\t}\n\t\t},\n    },\n};"],
  "mappings": "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",
  "names": []
}
