{
  "version": 3,
  "sources": ["../../../../data/mods/trainersupport/scripts.ts"],
  "sourcesContent": ["import {Dex} from '../../../sim/dex';\nexport const Scripts: {[k: string]: ModdedBattleScriptsData} = {\n\tgen: 9,\n\tinit() {\n\t\n\t},\n\tbattle: {\n\t\tcheckMoveMakesContact(move: ActiveMove, attacker: Pokemon, defender: Pokemon, announcePads = false) {\n\t\t\tif (move.flags['contact']) {\n\t\t\t\tif (attacker.hasItem('protectivepads')) {\n\t\t\t\t\tif (announcePads) {\n\t\t\t\t\t\tthis.add('-activate', defender, this.effect.fullname);\n\t\t\t\t\t\tthis.add('-activate', attacker, 'item: Protective Pads');\n\t\t\t\t\t}\n\t\t\t\t} else if (attacker.volatiles['marshal'] && !['brycenmanboost', 'pickpocket'].includes(this.effect)) {\n\t\t\t\t\tif (announcePads) {\n\t\t\t\t\t\tthis.add('-activate', defender, this.effect.fullname);\n\t\t\t\t\t\tthis.add('-activate', attacker, 'item: Marshal');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn !!move.flags['contact'];\n\t\t}\n\t},\n\tactions: {\n\t\tmodifyDamage(\n\t\tbaseDamage: number, pokemon: Pokemon, target: Pokemon, move: ActiveMove, suppressMessages = false\n\t) {\n\t\tconst tr = this.battle.trunc;\n\t\tif (!move.type) move.type = '???';\n\t\tconst type = move.type;\n\n\t\tbaseDamage += 2;\n\n\t\tif (move.spreadHit) {\n\t\t\t// multi-target modifier (doubles only)\n\t\t\tconst spreadModifier = move.spreadModifier || (this.battle.gameType === 'freeforall' ? 0.5 : 0.75);\n\t\t\tthis.battle.debug('Spread modifier: ' + spreadModifier);\n\t\t\tbaseDamage = this.battle.modify(baseDamage, spreadModifier);\n\t\t} else if (move.multihitType === 'parentalbond' && move.hit > 1) {\n\t\t\t// Parental Bond modifier\n\t\t\tconst bondModifier = this.battle.gen > 6 ? 0.25 : 0.5;\n\t\t\tthis.battle.debug(`Parental Bond modifier: ${bondModifier}`);\n\t\t\tbaseDamage = this.battle.modify(baseDamage, bondModifier);\n\t\t}\n\n\t\t// weather modifier\n\t\tbaseDamage = this.battle.runEvent('WeatherModifyDamage', pokemon, target, move, baseDamage);\n\n\t\t// crit - not a modifier\n\t\tconst isCrit = target.getMoveHitData(move).crit;\n\t\tif (isCrit) {\n\t\t\tbaseDamage = tr(baseDamage * (move.critModifier || (this.battle.gen >= 6 ? 1.5 : 2)));\n\t\t}\n\n\t\t// random factor - also not a modifier\n\t\tbaseDamage = this.battle.randomizer(baseDamage);\n\n\t\t// STAB\n\t\t// The \"???\" type never gets STAB\n\t\t// Not even if you Roost in Gen 4 and somehow manage to use\n\t\t// Struggle in the same turn.\n\t\t// (On second thought, it might be easier to get a MissingNo.)\n\t\tif (type !== '???') {\n\t\t\tlet stab: number | [number, number] = 1;\n\n\t\t\tconst isSTAB = move.forceSTAB || pokemon.hasType(type) || pokemon.getTypes(false, true).includes(type);\n\t\t\tif (isSTAB) {\n\t\t\t\tstab = 1.5;\n\t\t\t}\n\n\t\t\t// The Stellar tera type makes this incredibly confusing\n\t\t\t// If the move's type does not match one of the user's base types,\n\t\t\t// the Stellar tera type applies a one-time 1.2x damage boost for that type.\n\t\t\t//\n\t\t\t// If the move's type does match one of the user's base types,\n\t\t\t// then the Stellar tera type applies a one-time 2x STAB boost for that type,\n\t\t\t// and then goes back to using the regular 1.5x STAB boost for those types.\n\t\t\tif (pokemon.terastallized === 'Stellar') {\n\t\t\t\tif (!pokemon.stellarBoostedTypes.includes(type) || move.stellarBoosted) {\n\t\t\t\t\tstab = isSTAB ? 2 : [4915, 4096];\n\t\t\t\t\tmove.stellarBoosted = true;\n\t\t\t\t\tif (pokemon.species.name !== 'Terapagos-Stellar') {\n\t\t\t\t\t\tpokemon.stellarBoostedTypes.push(type);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (pokemon.terastallized === type && pokemon.getTypes(false, true).includes(type)) {\n\t\t\t\t\tstab = 2;\n\t\t\t\t}\n\t\t\t\tstab = this.battle.runEvent('ModifySTAB', pokemon, target, move, stab);\n\t\t\t}\n\n\t\t\tbaseDamage = this.battle.modify(baseDamage, stab);\n\t\t}\n\n\t\t// types\n\t\tlet typeMod = target.runEffectiveness(move);\n\t\ttypeMod = this.battle.clampIntRange(typeMod, -6, 6);\n\t\ttarget.getMoveHitData(move).typeMod = typeMod;\n\t\tif (typeMod > 0) {\n\t\t\tif (!suppressMessages) this.battle.add('-supereffective', target);\n\n\t\t\tfor (let i = 0; i < typeMod; i++) {\n\t\t\t\tbaseDamage *= 2;\n\t\t\t}\n\t\t}\n\t\tif (typeMod < 0) {\n\t\t\tif (!suppressMessages) this.battle.add('-resisted', target);\n\n\t\t\tfor (let i = 0; i > typeMod; i--) {\n\t\t\t\tbaseDamage = tr(baseDamage / 2);\n\t\t\t}\n\t\t}\n\n\t\tif (isCrit && !suppressMessages) this.battle.add('-crit', target);\n\n\t\tif (pokemon.status === 'brn' && move.category === 'Physical' && !pokemon.hasAbility('guts') && !pokemon.volatiles['marshalboost']) {\n\t\t\tif (this.battle.gen < 6 || move.id !== 'facade') {\n\t\t\t\tbaseDamage = this.battle.modify(baseDamage, 0.5);\n\t\t\t}\n\t\t}\n\n\t\t// Generation 5, but nothing later, sets damage to 1 before the final damage modifiers\n\t\tif (this.battle.gen === 5 && !baseDamage) baseDamage = 1;\n\n\t\t// Final modifier. Modifiers that modify damage after min damage check, such as Life Orb.\n\t\tbaseDamage = this.battle.runEvent('ModifyDamage', pokemon, target, move, baseDamage);\n\n\t\tif (move.isZOrMaxPowered && target.getMoveHitData(move).zBrokeProtect) {\n\t\t\tbaseDamage = this.battle.modify(baseDamage, 0.25);\n\t\t\tthis.battle.add('-zbroken', target);\n\t\t}\n\n\t\t// Generation 6-7 moves the check for minimum 1 damage after the final modifier...\n\t\tif (this.battle.gen !== 5 && !baseDamage) return 1;\n\n\t\t// ...but 16-bit truncation happens even later, and can truncate to 0\n\t\treturn tr(baseDamage, 16);\n\t}\n\n\t},\n\tpokemon: {\n\t\thasAbility(ability) {\n\t\t\tif (this.ignoringAbility()) return false;\n\t\t\tif (Array.isArray(ability)) return ability.some(abil => this.hasAbility(abil));\n\t\t\tconst abilityid = this.battle.toID(ability);\n\t\t\treturn this.ability === abilityid || !!this.volatiles['ability:' + abilityid];\n\t\t},\n\t},\n};\n"],
  "mappings": "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",
  "names": []
}
